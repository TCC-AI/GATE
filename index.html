üöÄ ÂÆåÊï¥ÂèØÈÅãË°åÁâàÊú¨ - Êò∂ÈùíÈõÜÂúò AI-GATE
üì¶ ÂÆåÊï¥Ê™îÊ°àÁµêÊßã
GATE/
‚îú‚îÄ‚îÄ index.html          (‰∏ªÈ†ÅÈù¢ - ‰∏ãÊñπÊèê‰æõ)
‚îú‚îÄ‚îÄ manifest.json       (PWA Manifest)
‚îú‚îÄ‚îÄ sw.js              (Service Worker)
‚îî‚îÄ‚îÄ ÂúñÁâáÊ™îÊ°à/
    ‚îú‚îÄ‚îÄ R0.png         (Logo - ÂøÖÈ†à)
    ‚îú‚îÄ‚îÄ app1.png       (ÊáâÁî®ÂúñÁ§∫ 1)
    ‚îú‚îÄ‚îÄ app2.png       (ÊáâÁî®ÂúñÁ§∫ 2)
    ‚îú‚îÄ‚îÄ app3.png       (ÊáâÁî®ÂúñÁ§∫ 3)
    ‚îú‚îÄ‚îÄ app4.png       (ÊáâÁî®ÂúñÁ§∫ 4)
    ‚îú‚îÄ‚îÄ app5.png       (ÊáâÁî®ÂúñÁ§∫ 5)
    ‚îú‚îÄ‚îÄ app7.png       (ÊáâÁî®ÂúñÁ§∫ 7)
    ‚îî‚îÄ‚îÄ app8.png       (ÊáâÁî®ÂúñÁ§∫ 8)


üìÑ 1. manifest.json
{
  "name": "Êò∂ÈùíÈõÜÂúò AI-GATE Êô∫ÊÖßÁÆ°ÁêÜÂπ≥Âè∞",
  "short_name": "AI-GATE",
  "description": "Êò∂ÈùíÈõÜÂúòAIÈ©ÖÂãïÊô∫ÊÖßÁÆ°ÁêÜÂπ≥Âè∞ - Êï¥ÂêàÊï∏‰ΩçË≥áÊñô„ÄÅÈ¢®Êéß„ÄÅË∑ØÂæëË¶èÂäÉÁ≠âÂ§öÈ†ÖÊô∫ËÉΩÊúçÂãô",
  "start_url": "./index.html",
  "scope": "./",
  "display": "standalone",
  "orientation": "portrait-primary",
  "background_color": "#0a0e27",
  "theme_color": "#0a0e27",
  "lang": "zh-TW",
  "dir": "ltr",
  "icons": [
    {
      "src": "./R0.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "any maskable"
    },
    {
      "src": "./R0.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "any maskable"
    }
  ],
  "categories": ["business", "productivity", "utilities"],
  "shortcuts": [
    {
      "name": "Êï∏‰ΩçË≥áÊñô‰∏≠ÂøÉ",
      "short_name": "Ë≥áÊñô‰∏≠ÂøÉ",
      "description": "Âø´ÈÄüÈñãÂïüÊï∏‰ΩçË≥áÊñôÁÆ°ÁêÜÂπ≥Âè∞",
      "url": "./index.html?app=digidata",
      "icons": [{ "src": "./app1.png", "sizes": "192x192" }]
    },
    {
      "name": "È¢®ÊéßÁÆ°ÁêÜ‰∏≠ÂøÉ",
      "short_name": "È¢®Êéß‰∏≠ÂøÉ",
      "description": "Âø´ÈÄüÈñãÂïüÈ¢®Èö™ÊéßÂà∂Á≥ªÁµ±",
      "url": "./index.html?app=risk",
      "icons": [{ "src": "./app2.png", "sizes": "192x192" }]
    }
  ]
}


üìÑ 2. sw.js (Service Worker)
const CACHE_NAME = 'ai-gate-v1.0.3';
const CACHE_URLS = [
    './',
    './index.html',
    './manifest.json',
    './R0.png',
    './app1.png',
    './app2.png',
    './app3.png',
    './app4.png',
    './app5.png',
    './app7.png',
    './app8.png',
    'https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600;700&display=swap'
];

// ÂÆâË£ù‰∫ã‰ª∂ - È†êÂø´ÂèñË≥áÊ∫ê
self.addEventListener('install', (event) => {
    console.log('[SW] üîß ÂÆâË£ù‰∏≠...');
    event.waitUntil(
        caches.open(CACHE_NAME)
            .then(cache => {
                console.log('[SW] üì¶ ÈñãÂßãÂø´ÂèñÊ™îÊ°à');
                return cache.addAll(CACHE_URLS.map(url => new Request(url, { cache: 'reload' })));
            })
            .then(() => {
                console.log('[SW] ‚úÖ Âø´ÂèñÂÆåÊàê');
                return self.skipWaiting();
            })
            .catch(err => {
                console.error('[SW] ‚ùå Âø´ÂèñÂ§±Êïó:', err);
            })
    );
});

// ÂïüÁî®‰∫ã‰ª∂ - Ê∏ÖÁêÜËàäÂø´Âèñ
self.addEventListener('activate', (event) => {
    console.log('[SW] üöÄ ÂïüÁî®‰∏≠...');
    event.waitUntil(
        caches.keys()
            .then(cacheNames => {
                return Promise.all(
                    cacheNames.map(cacheName => {
                        if (cacheName !== CACHE_NAME) {
                            console.log('[SW] üóëÔ∏è Âà™Èô§ËàäÂø´Âèñ:', cacheName);
                            return caches.delete(cacheName);
                        }
                    })
                );
            })
            .then(() => {
                console.log('[SW] ‚úÖ ÂïüÁî®ÂÆåÊàê');
                return self.clients.claim();
            })
    );
});

// Fetch ‰∫ã‰ª∂ - ÊîîÊà™Ë´ãÊ±Ç
self.addEventListener('fetch', (event) => {
    const { request } = event;
    const url = new URL(request.url);

    // Ë∑≥ÈÅé Chrome Extension Ë´ãÊ±Ç
    if (url.protocol === 'chrome-extension:') {
        return;
    }

    // Ë∑≥ÈÅéÈùû GET Ë´ãÊ±Ç
    if (request.method !== 'GET') {
        return;
    }

    event.respondWith(
        caches.match(request)
            .then(cachedResponse => {
                if (cachedResponse) {
                    console.log('[SW] üì¶ ÂæûÂø´ÂèñËºâÂÖ•:', url.pathname);
                    return cachedResponse;
                }

                console.log('[SW] üåê ÂæûÁ∂≤Ë∑ØËºâÂÖ•:', url.pathname);
                return fetch(request)
                    .then(response => {
                        // Âè™Âø´ÂèñÊàêÂäüÁöÑÂõûÊáâ
                        if (!response || response.status !== 200 || response.type !== 'basic') {
                            return response;
                        }

                        // Ë§áË£ΩÂõûÊáâ‰∏¶Â≠òÂÖ•Âø´Âèñ
                        const responseToCache = response.clone();
                        caches.open(CACHE_NAME)
                            .then(cache => {
                                cache.put(request, responseToCache);
                            });

                        return response;
                    })
                    .catch(err => {
                        console.error('[SW] ‚ùå Fetch Â§±Êïó:', err);
                        
                        // ËøîÂõûÈõ¢Á∑öÈ†ÅÈù¢
                        return new Response(
                            `<!DOCTYPE html>
                            <html lang="zh-TW">
                            <head>
                                <meta charset="UTF-8">
                                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                                <title>Èõ¢Á∑öÊ®°Âºè</title>
                                <style>
                                    body {
                                        font-family: 'Noto Sans TC', sans-serif;
                                        background: #0a0e27;
                                        color: #00ffff;
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        height: 100vh;
                                        margin: 0;
                                        text-align: center;
                                    }
                                    .offline-container {
                                        padding: 40px;
                                    }
                                    .offline-icon {
                                        font-size: 5rem;
                                        margin-bottom: 20px;
                                    }
                                    .offline-title {
                                        font-size: 2rem;
                                        margin-bottom: 10px;
                                    }
                                    .offline-desc {
                                        opacity: 0.8;
                                        margin-bottom: 30px;
                                    }
                                    .retry-button {
                                        background: linear-gradient(135deg, #0064ff 0%, #00ffff 100%);
                                        color: white;
                                        border: none;
                                        padding: 15px 40px;
                                        font-size: 1.1rem;
                                        font-weight: bold;
                                        cursor: pointer;
                                        border-radius: 5px;
                                    }
                                </style>
                            </head>
                            <body>
                                <div class="offline-container">
                                    <div class="offline-icon">üì°</div>
                                    <div class="offline-title">Èõ¢Á∑öÊ®°Âºè</div>
                                    <div class="offline-desc">ÁõÆÂâçÁÑ°Ê≥ïÈÄ£Á∑öÔºåË´ãÊ™¢Êü•Á∂≤Ë∑ØÈÄ£Á∑ö</div>
                                    <button class="retry-button" onclick="location.reload()">ÈáçÊñ∞ËºâÂÖ•</button>
                                </div>
                            </body>
                            </html>`,
                            {
                                status: 503,
                                statusText: 'Service Unavailable',
                                headers: new Headers({
                                    'Content-Type': 'text/html; charset=utf-8'
                                })
                            }
                        );
                    });
            })
    );
});

// Ë®äÊÅØ‰∫ã‰ª∂ - Êé•Êî∂‰æÜËá™È†ÅÈù¢ÁöÑË®äÊÅØ
self.addEventListener('message', (event) => {
    if (event.data && event.data.type === 'SKIP_WAITING') {
        self.skipWaiting();
    }
});


üìÑ 3. index.html (ÂÆåÊï¥‰øÆÊ≠£Áâà)
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#0a0e27">
    <meta name="description" content="Êò∂ÈùíÈõÜÂúòÊáâÁî®Á®ãÂºèÂÖ•Âè£ - GAIÈ©ÖÂãïÊô∫ÊÖßÁÆ°ÁêÜÂπ≥Âè∞ÔºåÊï¥ÂêàÊï∏‰ΩçË≥áÊñô„ÄÅÈ¢®Êéß„ÄÅË∑ØÂæëË¶èÂäÉÁ≠âÂ§öÈ†ÖÊô∫ËÉΩÊúçÂãô">
    <meta name="keywords" content="Êò∂ÈùíÈõÜÂúò,AI,Êô∫ÊÖßÁÆ°ÁêÜ,Êï∏‰ΩçËΩâÂûã,GAI">
    <meta name="author" content="Êò∂ÈùíÈõÜÂúò">
    
    <!-- ‚úÖ ÁßªÈô§Âö¥Ê†ºÁöÑ CSPÔºåÊîπÁî®ËºÉÂØ¨È¨ÜÁöÑÁ≠ñÁï• -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https:; 
        img-src 'self' data: https: blob:; 
        script-src 'self' 'unsafe-inline' 'unsafe-eval' blob:; 
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; 
        font-src 'self' https://fonts.gstatic.com data:; 
        connect-src 'self' https:;
        manifest-src 'self';
        worker-src 'self';">
    
    <title>Êò∂ÈùíÈõÜÂúòÊáâÁî®Á®ãÂºèÂÖ•Âè£ - GAIÈ©ÖÂãïÊô∫ÊÖßÁÆ°ÁêÜÂπ≥Âè∞</title>
    
    <!-- Preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- ‚úÖ ‰ΩøÁî®Â§ñÈÉ® Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="./R0.png">
    <link rel="icon" type="image/png" href="./R0.png">
    
    <!-- Apple Web App -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AI-GATE">
    
    <style>
        /* ‰øùÊåÅÂéüÊúâÁöÑ CSS Ê®£Âºè‰∏çËÆä */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rajdhani', 'Noto Sans TC', sans-serif;
            min-height: 100vh;
            background: #0a0e27;
            position: relative;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            padding-top: max(20px, env(safe-area-inset-top));
            padding-bottom: max(20px, env(safe-area-inset-bottom));
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: 0;
            pointer-events: none;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 255, 255, 0.8) 50%, 
                transparent 100%);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
            animation: scanLine 4s linear infinite;
            z-index: 0;
            pointer-events: none;
            will-change: transform;
        }

        @keyframes scanLine {
            0% { transform: translateY(0); }
            100% { transform: translateY(100vh); }
        }

        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            body::after {
                animation: none;
            }
        }

        #particleCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            transform: translateZ(0);
        }

        .content-wrapper {
            position: relative;
            z-index: 1;
            width: 100%;
            max-width: 1400px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .logo-container {
            margin-bottom: 20px;
            animation: fadeInDown 0.8s ease-out;
            position: relative;
            filter: drop-shadow(0 0 30px rgba(0, 255, 255, 0.6));
            width: 120px;
            height: 120px;
        }

        .logo {
            width: 100%;
            height: 100%;
            object-fit: contain;
            clip-path: polygon(
                50% 0%, 
                80.9% 9.5%, 
                97.6% 34.5%, 
                97.6% 65.5%, 
                80.9% 90.5%, 
                50% 100%, 
                19.1% 90.5%, 
                2.4% 65.5%, 
                2.4% 34.5%, 
                19.1% 9.5%
            );
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            animation: float 6s ease-in-out infinite;
            will-change: transform;
        }

        .logo:hover {
            transform: scale(1.15);
            filter: drop-shadow(0 0 50px rgba(0, 255, 255, 1));
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateZ(0); }
            50% { transform: translateY(-15px) translateZ(0); }
        }

        .title {
            font-family: 'Orbitron', 'Rajdhani', sans-serif;
            font-size: 4rem;
            font-weight: 900;
            color: #00ffff;
            text-align: center;
            margin-bottom: 40px;
            letter-spacing: 8px;
            text-transform: uppercase;
            text-shadow: 
                0 0 10px rgba(0, 255, 255, 0.8),
                0 0 20px rgba(0, 255, 255, 0.6),
                0 0 30px rgba(0, 255, 255, 0.4),
                0 0 40px rgba(0, 100, 255, 0.3);
            animation: fadeInDown 0.8s ease-out 0.2s both, 
                       neonPulse 2s ease-in-out infinite alternate;
            position: relative;
            line-height: 1.2;
        }

        .title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                #00ffff 50%, 
                transparent 100%);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
        }

        @keyframes neonPulse {
            from { 
                text-shadow: 
                    0 0 10px rgba(0, 255, 255, 0.8),
                    0 0 20px rgba(0, 255, 255, 0.6),
                    0 0 30px rgba(0, 255, 255, 0.4);
            }
            to { 
                text-shadow: 
                    0 0 20px rgba(0, 255, 255, 1),
                    0 0 30px rgba(0, 255, 255, 0.8),
                    0 0 40px rgba(0, 255, 255, 0.6),
                    0 0 50px rgba(0, 100, 255, 0.4);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .main-container {
            background: rgba(10, 14, 39, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 0;
            padding: 40px;
            border: 2px solid rgba(0, 255, 255, 0.3);
            box-shadow: 
                0 0 20px rgba(0, 255, 255, 0.2),
                inset 0 0 30px rgba(0, 255, 255, 0.05);
            max-width: 1400px;
            width: 100%;
            animation: fadeInUp 0.8s ease-out 0.4s both;
            position: relative;
            overflow: hidden;
            clip-path: polygon(
                0 0, 
                calc(100% - 20px) 0, 
                100% 20px, 
                100% 100%, 
                20px 100%, 
                0 calc(100% - 20px)
            );
            contain: layout style paint;
        }

        .main-container::before,
        .main-container::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid #00ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.6);
        }

        .main-container::before {
            top: 10px;
            left: 10px;
            border-right: none;
            border-bottom: none;
        }

        .main-container::after {
            bottom: 10px;
            right: 10px;
            border-left: none;
            border-top: none;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .apps-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-auto-rows: 200px;
            gap: 20px;
            padding: 20px;
            position: relative;
            z-index: 1;
            contain: layout style;
        }

        .app-item {
            perspective: 1000px;
            cursor: pointer;
            position: relative;
            text-decoration: none;
            transition: transform 0.3s ease;
            z-index: 1;
            isolation: isolate;
            width: 100%;
            height: 100%;
            contain: layout style paint;
        }

        .app-item:focus {
            outline: 2px solid #00ffff;
            outline-offset: 4px;
        }

        .app-item:hover {
            z-index: 10;
        }

        .app-card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform;
        }

        @media (min-width: 769px) {
            .app-item:hover .app-card {
                transform: rotateY(180deg);
            }
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 0;
            overflow: hidden;
            transform-style: preserve-3d;
            contain: layout style paint;
        }

        .card-front {
            background: rgba(15, 20, 45, 0.9);
            border: 2px solid rgba(0, 255, 255, 0.3);
            box-shadow: 
                0 0 20px rgba(0, 255, 255, 0.2),
                inset 0 0 30px rgba(0, 255, 255, 0.05);
            display: flex;
            flex-direction: row;
            align-items: center;
            padding: 25px;
            transition: all 0.3s ease;
            clip-path: polygon(
                0 0, 
                calc(100% - 15px) 0, 
                100% 15px, 
                100% 100%, 
                15px 100%, 
                0 calc(100% - 15px)
            );
            position: relative;
            z-index: 2;
        }

        .card-front::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 255, 255, 0.1) 50%, 
                transparent 100%);
            transition: left 0.5s ease;
        }

        .app-item:hover .card-front::before {
            left: 100%;
        }

        .app-item:hover .card-front {
            border-color: rgba(0, 255, 255, 0.6);
            box-shadow: 
                0 0 30px rgba(0, 255, 255, 0.4),
                inset 0 0 40px rgba(0, 255, 255, 0.1);
        }

        .card-back {
            background: linear-gradient(135deg, 
                rgba(0, 100, 255, 0.9) 0%, 
                rgba(0, 255, 255, 0.9) 100%);
            border: 2px solid rgba(0, 255, 255, 0.5);
            transform: rotateY(180deg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 25px;
            color: white;
            clip-path: polygon(
                0 0, 
                calc(100% - 15px) 0, 
                100% 15px, 
                100% 100%, 
                15px 100%, 
                0 calc(100% - 15px)
            );
            z-index: 1;
        }

        .card-back-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            white-space: pre-line;
        }

        .card-back-desc {
            font-size: 0.9rem;
            text-align: center;
            opacity: 0.9;
            line-height: 1.5;
        }

        .card-back-action {
            margin-top: 18px;
            padding: 10px 25px;
            background: white;
            color: #0064ff;
            border-radius: 0;
            font-weight: 700;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            clip-path: polygon(5px 0, 100% 0, 100% calc(100% - 5px), calc(100% - 5px) 100%, 0 100%, 0 5px);
        }

        .card-back-action:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .app-icon-wrapper {
            width: 150px;
            height: 150px;
            flex-shrink: 0;
            margin-right: 15px;
            position: relative;
            contain: layout size style;
        }

        .app-icon {
            width: 100%;
            height: 100%;
            border-radius: 0;
            background: linear-gradient(135deg, #0064ff 0%, #00ffff 100%);
            padding: 3px;
            box-shadow: 
                0 0 20px rgba(0, 255, 255, 0.4),
                inset 0 0 20px rgba(0, 255, 255, 0.2);
            transition: all 0.3s ease;
            clip-path: polygon(
                50% 0%, 
                80.9% 9.5%, 
                97.6% 34.5%, 
                97.6% 65.5%, 
                80.9% 90.5%, 
                50% 100%, 
                19.1% 90.5%, 
                2.4% 65.5%, 
                2.4% 34.5%, 
                19.1% 9.5%
            );
        }

        .app-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            background: #0a0e27;
            clip-path: polygon(
                50% 0%, 
                80.9% 9.5%, 
                97.6% 34.5%, 
                97.6% 65.5%, 
                80.9% 90.5%, 
                50% 100%, 
                19.1% 90.5%, 
                2.4% 65.5%, 
                2.4% 34.5%, 
                19.1% 9.5%
            );
        }

        .icon-fallback {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            font-size: 3rem;
            color: #00ffff;
        }

        .app-text-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: left;
            min-width: 0;
            line-height: 1.5;
        }

        .app-name {
            font-family: 'Orbitron', 'Rajdhani', sans-serif;
            font-size: 1.5rem;
            font-weight: 900;
            color: #00ffff;
            text-shadow: 
                0 0 10px rgba(0, 255, 255, 0.8),
                0 0 20px rgba(0, 255, 255, 0.4);
            margin-bottom: 8px;
            line-height: 1.3;
            text-transform: uppercase;
            letter-spacing: 2px;
            white-space: pre-line;
        }

        .app-desc {
            font-size: 0.9rem;
            font-weight: 400;
            color: rgba(0, 255, 255, 0.8);
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .app-item {
            --magnetic-x: 0;
            --magnetic-y: 0;
        }

        .app-item.magnetic-active {
            transform: translate(var(--magnetic-x), var(--magnetic-y)) scale(1.02);
        }

        .detail-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .detail-modal.show {
            opacity: 1;
            pointer-events: auto;
        }

        .detail-content {
            background: linear-gradient(135deg, 
                rgba(0, 100, 255, 0.95) 0%, 
                rgba(0, 255, 255, 0.95) 100%);
            backdrop-filter: blur(20px);
            border-radius: 0;
            padding: 40px;
            max-width: 90%;
            width: 400px;
            color: white;
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.3s ease;
            border: 2px solid rgba(0, 255, 255, 0.5);
            box-shadow: 0 0 40px rgba(0, 255, 255, 0.6);
            clip-path: polygon(
                0 0, 
                calc(100% - 20px) 0, 
                100% 20px, 
                100% 100%, 
                20px 100%, 
                0 calc(100% - 20px)
            );
        }

        .detail-modal.show .detail-content {
            transform: scale(1);
        }

        .detail-icon {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            border-radius: 0;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            clip-path: polygon(
                50% 0%, 
                80.9% 9.5%, 
                97.6% 34.5%, 
                97.6% 65.5%, 
                80.9% 90.5%, 
                50% 100%, 
                19.1% 90.5%, 
                2.4% 65.5%, 
                2.4% 34.5%, 
                19.1% 9.5%
            );
        }

        .detail-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .detail-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            white-space: pre-line;
        }

        .detail-desc {
            font-size: 1rem;
            line-height: 1.6;
            opacity: 0.9;
            margin-bottom: 25px;
        }

        .detail-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .detail-button {
            padding: 12px 30px;
            border-radius: 0;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-family: 'Rajdhani', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            clip-path: polygon(5px 0, 100% 0, 100% calc(100% - 5px), calc(100% - 5px) 100%, 0 100%, 0 5px);
        }

        .detail-button.primary {
            background: white;
            color: #0064ff;
        }

        .detail-button.secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .detail-button:active {
            transform: scale(0.95);
        }

        .install-prompt {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(150px);
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(0, 255, 255, 0.5);
            color: #00ffff;
            padding: 18px 35px;
            border-radius: 0;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.4);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
        }

        .install-prompt.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
            pointer-events: auto;
        }

        .install-prompt button {
            background: linear-gradient(135deg, #0064ff 0%, #00ffff 100%);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 0;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', sans-serif;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
            clip-path: polygon(5px 0, 100% 0, 100% calc(100% - 5px), calc(100% - 5px) 100%, 0 100%, 0 5px);
        }

        .install-prompt button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.6);
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            .title {
                font-size: 2.5rem;
                letter-spacing: 4px;
                margin-bottom: 25px;
            }

            .logo-container {
                width: 90px;
                height: 90px;
            }

            .main-container {
                padding: 25px 15px;
            }

            .apps-grid {
                display: flex;
                flex-direction: column;
                gap: 20px;
                padding: 15px 5px;
            }

            .app-item {
                width: 100%;
                height: 160px;
                perspective: none;
            }

            .card-front {
                padding: 20px;
            }

            .app-icon-wrapper {
                width: 120px;
                height: 120px;
                margin-right: 15px;
            }

            .app-name {
                font-size: 1.2rem;
            }

            .app-desc {
                font-size: 0.85rem;
                -webkit-line-clamp: 2;
            }

            .app-card {
                transform: none !important;
            }

            .card-back {
                display: none;
            }

            .app-item:active {
                transform: scale(0.98);
            }

            .detail-content {
                padding: 30px 25px;
                width: 85%;
            }

            .detail-icon {
                width: 80px;
                height: 80px;
            }

            .detail-title {
                font-size: 1.5rem;
            }

            .detail-desc {
                font-size: 0.9rem;
            }

            .detail-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .detail-button {
                width: 100%;
            }

            .install-prompt {
                bottom: 20px;
                padding: 15px 25px;
                font-size: 0.9rem;
                max-width: 90%;
            }

            .install-prompt button {
                padding: 8px 20px;
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 2rem;
                letter-spacing: 2px;
            }

            .logo-container {
                width: 75px;
                height: 75px;
            }

            .main-container {
                padding: 20px 12px;
            }

            .apps-grid {
                gap: 15px;
            }

            .app-item {
                height: 140px;
            }

            .app-icon-wrapper {
                width: 100px;
                height: 100px;
            }

            .app-name {
                font-size: 1.1rem;
            }

            .app-desc {
                font-size: 0.8rem;
            }
        }

        @media (min-width: 769px) and (max-width: 1200px) {
            .apps-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <canvas id="particleCanvas"></canvas>

    <div class="content-wrapper">
        <div class="logo-container">
            <img src="./R0.png" alt="Êò∂ÈùíÈõÜÂúò Logo" class="logo" loading="eager" width="120" height="120">
        </div>

        <h1 class="title">Êò∂ÈùíÈõÜÂúòÊáâÁî®Á®ãÂºèÂÖ•Âè£<br>GAIÈ©ÖÂãïÊô∫ÊÖßÁÆ°ÁêÜÂπ≥Âè∞</h1>

        <div class="main-container">
            <div class="apps-grid" id="appsGrid"></div>
        </div>
    </div>

    <div class="detail-modal" id="detailModal" role="dialog" aria-modal="true" aria-labelledby="detailTitle">
        <div class="detail-content">
            <div class="detail-icon" id="detailIcon"></div>
            <div class="detail-title" id="detailTitle"></div>
            <div class="detail-desc" id="detailDesc"></div>
            <div class="detail-buttons">
                <button class="detail-button primary" id="detailOpen">Á´ãÂç≥ÈñãÂïü</button>
                <button class="detail-button secondary" id="detailClose">ÈóúÈñâ</button>
            </div>
        </div>
    </div>

    <div class="install-prompt" id="installPrompt" role="alert">
        <span id="installText">üì± Â∞á AI-GATE Âä†ÂÖ•‰∏ªÁï´Èù¢</span>
        <button id="installButton">ÂÆâË£ù</button>
    </div>

    <script>
        (function() {
            'use strict';

            const CONFIG = {
                particles: {
                    mobile: { count: 30, maxDistance: 120 },
                    desktop: { count: 50, maxDistance: 150 }
                },
                interactions: {
                    longPressDelay: 500,
                    magneticStrength: 0.1,
                    magneticMaxOffset: 15
                },
                breakpoints: {
                    mobile: 768,
                    tablet: 1200
                }
            };

            // ‚úÖ ‰øÆÊ≠£ÔºöÁßªÈô§Áº∫Â§±ÁöÑÂúñÁâáÊáâÁî®
            const apps = [
                { 
                    name: 'GAIÊï∏‰ΩçË≥áÊñô‰∏≠ÂøÉ\n„ÄêWillion„Äë', 
                    icon: './app1.png', 
                    url: 'https://tcc-ai.github.io/digidata/',
                    desc: 'Êô∫ËÉΩÊï∏‰ΩçË≥áÊñôËàáÁÆ°ÁêÜÂπ≥Âè∞ÔºåÊèê‰æõÂç≥ÊôÇÊñá‰ª∂Êü•Èñ±ËàáË¶ñË¶∫ÂåñÂ†±Ë°®'
                },
                { 
                    name: 'GAIÈ¢®ÊéßÁÆ°ÁêÜ‰∏≠ÂøÉ\n„ÄêTina„Äë', 
                    icon: './app2.png', 
                    url: 'https://tcc-ai.github.io/Risk/',
                    desc: 'Âç≥ÊôÇÈ¢®Èö™Áõ£ÊéßËàáÈ†êË≠¶Á≥ªÁµ±Ôºå‰øùÈöú‰ºÅÊ•≠ÁáüÈÅãÂÆâÂÖ®'
                },
                { 
                    name: 'GAIË∑ØÂæëË¶èÂäÉ‰∏≠ÂøÉ\n„ÄêLisa„Äë', 
                    icon: './app3.png', 
                    url: 'https://tcc-ai.github.io/GAIRoute/',
                    desc: 'Êô∫ËÉΩÁâ©ÊµÅË∑ØÁ∑öÂÑ™ÂåñÔºåÈôç‰ΩéÈÅãËº∏ÊàêÊú¨ÊèêÂçáÊïàÁéá'
                },
                { 
                    name: 'GAIÊéíÊ¥æËªä‰∏≠ÂøÉ\n„ÄêLisa„Äë', 
                    icon: './app3.png', 
                    url: 'https://tcc-ai.github.io/GAITransporter/',
                    desc: 'Ëá™ÂãïÂåñËªäËºõË™øÂ∫¶Á≥ªÁµ±ÔºåÂØ¶ÁèæÊô∫ËÉΩÊ¥æËªäÁÆ°ÁêÜ'
                },
                { 
                    name: 'GAIÊô∫ÊÖßÂ∫´Â≠ò‰∏≠ÂøÉ\n„ÄêElon„Äë', 
                    icon: './app4.png', 
                    url: 'https://tcc-ai.github.io/GAIstock/',
                    desc: 'Êô∫ËÉΩÂ∫´Â≠òÈ†êÊ∏¨ËàáÁÆ°ÁêÜÔºåÂÑ™ÂåñÂ∫´Â≠òÈÄ±ËΩâÁéá'
                },
                { 
                    name: 'GAIÊô∫ËÉΩËÅ∑Ë®ì‰∏≠ÂøÉ\n„ÄêSophia„Äë', 
                    icon: './app5.png', 
                    url: 'https://tcc-ai.github.io/TRAIN/',
                    desc: 'ÂÄãÊÄßÂåñÂì°Â∑•ÂüπË®ìÂπ≥Âè∞ÔºåÊèêÂçáÂúòÈöäÂ∞àÊ•≠ËÉΩÂäõ'
                }
                // ‚úÖ ÁßªÈô§ app6, app7, app8, app9, app10ÔºàÈÅøÂÖç 404 ÈåØË™§Ôºâ
            ];

            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            function throttle(func, limit) {
                let inThrottle;
                return function(...args) {
                    if (!inThrottle) {
                        func.apply(this, args);
                        inThrottle = true;
                        setTimeout(() => inThrottle = false, limit);
                    }
                };
            }

            function debounce(func, wait) {
                let timeout;
                return function(...args) {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(this, args), wait);
                };
            }

            function safeLocalStorage(key, value) {
                try {
                    if (value === undefined) {
                        return localStorage.getItem(key);
                    }
                    localStorage.setItem(key, value);
                    return true;
                } catch (e) {
                    console.warn('localStorage ‰∏çÂèØÁî®:', e);
                    return value === undefined ? null : false;
                }
            }

            // ‚úÖ ÊîπÈÄ≤ÁöÑÂúñÁâáÈåØË™§ËôïÁêÜ
            function createAppIcon(app) {
                const wrapper = document.createElement('div');
                wrapper.className = 'app-icon-wrapper';
                
                const iconDiv = document.createElement('div');
                iconDiv.className = 'app-icon';
                
                const img = document.createElement('img');
                img.src = app.icon;
                img.alt = escapeHtml(app.name);
                img.loading = 'lazy';
                img.decoding = 'async';
                img.width = 150;
                img.height = 150;
                
                img.addEventListener('error', function() {
                    console.warn(`ÂúñÁâáËºâÂÖ•Â§±Êïó: ${app.icon}`);
                    const parent = this.parentElement;
                    if (parent) {
                        parent.innerHTML = '';
                        
                        // ÂâµÂª∫ SVG fallback
                        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                        svg.setAttribute('width', '150');
                        svg.setAttribute('height', '150');
                        svg.setAttribute('viewBox', '0 0 150 150');
                        svg.innerHTML = `
                            <defs>
                                <linearGradient id="grad${Date.now()}" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#0064ff;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#00ffff;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <rect width="150" height="150" fill="url(#grad${Date.now()})" />
                            <text x="75" y="75" text-anchor="middle" dominant-baseline="middle" 
                                  fill="white" font-size="48" font-weight="bold">‚ö°</text>
                        `;
                        parent.appendChild(svg);
                    }
                }, { once: true });
                
                iconDiv.appendChild(img);
                wrapper.appendChild(iconDiv);
                return wrapper;
            }

            function createCardFront(app) {
                const front = document.createElement('div');
                front.className = 'card-front';
                
                const iconWrapper = createAppIcon(app);
                
                const textWrapper = document.createElement('div');
                textWrapper.className = 'app-text-wrapper';
                
                const name = document.createElement('div');
                name.className = 'app-name';
                name.textContent = app.name;
                
                const desc = document.createElement('div');
                desc.className = 'app-desc';
                desc.textContent = app.desc;
                
                textWrapper.appendChild(name);
                textWrapper.appendChild(desc);
                
                front.appendChild(iconWrapper);
                front.appendChild(textWrapper);
                
                return front;
            }

            function createCardBack(app) {
                const back = document.createElement('div');
                back.className = 'card-back';
                
                const title = document.createElement('div');
                title.className = 'card-back-title';
                title.textContent = app.name;
                
                const desc = document.createElement('div');
                desc.className = 'card-back-desc';
                desc.textContent = app.desc;
                
                const action = document.createElement('div');
                action.className = 'card-back-action';
                action.textContent = 'Á´ãÂç≥ÈñãÂïü ‚Üí';
                
                back.appendChild(title);
                back.appendChild(desc);
                back.appendChild(action);
                
                return back;
            }

            function createAppItem(app, index) {
                const appItem = document.createElement('a');
                appItem.href = app.url;
                appItem.className = 'app-item';
                appItem.setAttribute('role', 'button');
                appItem.setAttribute('aria-label', `ÈñãÂïü ${app.name.replace(/\n/g, ' ')}`);
                appItem.setAttribute('tabindex', '0');
                appItem.dataset.url = app.url;
                appItem.dataset.name = app.name;
                appItem.dataset.desc = app.desc;
                appItem.dataset.icon = app.icon;
                appItem.style.animationDelay = `${index * 0.05}s`;
                
                const card = document.createElement('div');
                card.className = 'app-card';
                
                const front = createCardFront(app);
                card.appendChild(front);
                
                if (window.innerWidth > CONFIG.breakpoints.mobile) {
                    const back = createCardBack(app);
                    card.appendChild(back);
                }
                
                appItem.appendChild(card);
                
                appItem.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        window.open(app.url, '_blank', 'noopener,noreferrer');
                    }
                });
                
                appItem.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.open(app.url, '_blank', 'noopener,noreferrer');
                });
                
                return appItem;
            }

            function renderApps() {
                const grid = document.getElementById('appsGrid');
                if (!grid) {
                    console.error('Êâæ‰∏çÂà∞ appsGrid ÂÖÉÁ¥†');
                    return;
                }
                
                grid.innerHTML = '';
                const fragment = document.createDocumentFragment();

                apps.forEach((app, index) => {
                    try {
                        const appItem = createAppItem(app, index);
                        fragment.appendChild(appItem);
                    } catch (error) {
                        console.error(`Ê∏≤ÊüìÊáâÁî® ${app.name} Â§±Êïó:`, error);
                    }
                });
                
                grid.appendChild(fragment);
                
                if (window.innerWidth > CONFIG.breakpoints.mobile) {
                    initMagneticEffect();
                }
                initTouchEvents();
            }

            const touchTimers = new WeakMap();
            
            function initTouchEvents() {
                const appItems = document.querySelectorAll('.app-item');
                const detailModal = document.getElementById('detailModal');
                const detailIcon = document.getElementById('detailIcon');
                const detailTitle = document.getElementById('detailTitle');
                const detailDesc = document.getElementById('detailDesc');
                const detailOpen = document.getElementById('detailOpen');
                const detailClose = document.getElementById('detailClose');

                let currentUrl = '';

                appItems.forEach(item => {
                    if (window.innerWidth <= CONFIG.breakpoints.mobile) {
                        item.addEventListener('touchstart', function(e) {
                            const timer = setTimeout(() => {
                                e.preventDefault();
                                currentUrl = this.dataset.url;
                                
                                const iconImg = document.createElement('img');
                                iconImg.src = this.dataset.icon;
                                iconImg.alt = this.dataset.name;
                                if (detailIcon) {
                                    detailIcon.innerHTML = '';
                                    detailIcon.appendChild(iconImg);
                                }
                                
                                if (detailTitle) detailTitle.textContent = this.dataset.name;
                                if (detailDesc) detailDesc.textContent = this.dataset.desc;
                                
                                if (detailModal) detailModal.classList.add('show');
                                
                                if (navigator.vibrate) {
                                    navigator.vibrate(50);
                                }
                            }, CONFIG.interactions.longPressDelay);
                            
                            touchTimers.set(this, timer);
                        }, { passive: false });

                        item.addEventListener('touchend', function() {
                            const timer = touchTimers.get(this);
                            if (timer) {
                                clearTimeout(timer);
                                touchTimers.delete(this);
                            }
                        });

                        item.addEventListener('touchmove', function() {
                            const timer = touchTimers.get(this);
                            if (timer) {
                                clearTimeout(timer);
                                touchTimers.delete(this);
                            }
                        });
                    }
                });

                if (detailOpen) {
                    detailOpen.addEventListener('click', () => {
                        window.open(currentUrl, '_blank', 'noopener,noreferrer');
                        if (detailModal) detailModal.classList.remove('show');
                    });
                }

                if (detailClose) {
                    detailClose.addEventListener('click', () => {
                        if (detailModal) detailModal.classList.remove('show');
                    });
                }

                if (detailModal) {
                    detailModal.addEventListener('click', (e) => {
                        if (e.target === detailModal) {
                            detailModal.classList.remove('show');
                        }
                    });
                }
            }

            function initMagneticEffect() {
                const appItems = document.querySelectorAll('.app-item');

                appItems.forEach(item => {
                    item.addEventListener('mouseenter', function() {
                        this.classList.add('magnetic-active');
                    });

                    item.addEventListener('mouseleave', function() {
                        this.classList.remove('magnetic-active');
                        this.style.setProperty('--magnetic-x', '0px');
                        this.style.setProperty('--magnetic-y', '0px');
                    });

                    const throttledMove = throttle(function(e) {
                        if (!this.classList.contains('magnetic-active')) return;

                        const rect = this.getBoundingClientRect();
                        const itemCenterX = rect.left + rect.width / 2;
                        const itemCenterY = rect.top + rect.height / 2;
                        
                        const deltaX = e.clientX - itemCenterX;
                        const deltaY = e.clientY - itemCenterY;
                        
                        const maxOffset = CONFIG.interactions.magneticMaxOffset;
                        const strength = CONFIG.interactions.magneticStrength;
                        
                        const magneticX = Math.max(-maxOffset, Math.min(maxOffset, deltaX * strength));
                        const magneticY = Math.max(-maxOffset, Math.min(maxOffset, deltaY * strength));
                        
                        this.style.setProperty('--magnetic-x', `${magneticX}px`);
                        this.style.setProperty('--magnetic-y', `${magneticY}px`);
                    }, 16);

                    item.addEventListener('mousemove', throttledMove);
                });
            }

            class ParticleSystem {
                constructor() {
                    this.canvas = document.getElementById('particleCanvas');
                    if (!this.canvas) {
                        console.warn('Êâæ‰∏çÂà∞ particleCanvas');
                        return;
                    }
                    
                    this.ctx = this.canvas.getContext('2d', { 
                        alpha: true,
                        desynchronized: true 
                    });
                    this.particles = [];
                    this.animationId = null;
                    this.lastTime = 0;
                    this.fps = 30;
                    this.fpsInterval = 1000 / this.fps;
                    
                    const config = window.innerWidth < CONFIG.breakpoints.mobile 
                        ? CONFIG.particles.mobile 
                        : CONFIG.particles.desktop;
                    
                    this.particleCount = config.count;
                    this.maxDistance = config.maxDistance;
                    
                    this.resize();
                    this.init();
                    this.animate(0);
                    
                    window.addEventListener('resize', debounce(() => this.resize(), 250));
                    
                    document.addEventListener('visibilitychange', () => {
                        if (document.hidden) {
                            if (this.animationId) {
                                cancelAnimationFrame(this.animationId);
                                this.animationId = null;
                            }
                        } else {
                            if (!this.animationId) {
                                this.lastTime = performance.now();
                                this.animate(this.lastTime);
                            }
                        }
                    });
                }

                resize() {
                    if (this.canvas) {
                        this.canvas.width = window.innerWidth;
                        this.canvas.height = window.innerHeight;
                    }
                }

                init() {
                    this.particles = [];
                    for (let i = 0; i < this.particleCount; i++) {
                        this.particles.push({
                            x: Math.random() * this.canvas.width,
                            y: Math.random() * this.canvas.height,
                            vx: (Math.random() - 0.5) * 0.5,
                            vy: (Math.random() - 0.5) * 0.5,
                            radius: Math.random() * 1.5 + 0.5
                        });
                    }
                }

                update() {
                    this.particles.forEach(particle => {
                        particle.x += particle.vx;
                        particle.y += particle.vy;

                        if (particle.x < 0 || particle.x > this.canvas.width) particle.vx *= -1;
                        if (particle.y < 0 || particle.y > this.canvas.height) particle.vy *= -1;
                    });
                }

                draw() {
                    if (!this.ctx) return;
                    
                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                    this.particles.forEach(particle => {
                        this.ctx.beginPath();
                        this.ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                        this.ctx.fillStyle = 'rgba(0, 255, 255, 0.6)';
                        this.ctx.fill();
                    });

                    for (let i = 0; i < this.particles.length; i++) {
                        for (let j = i + 1; j < this.particles.length; j++) {
                            const dx = this.particles[i].x - this.particles[j].x;
                            const dy = this.particles[i].y - this.particles[j].y;
                            const distance = Math.sqrt(dx * dx + dy * dy);

                            if (distance < this.maxDistance) {
                                const opacity = 1 - (distance / this.maxDistance);
                                this.ctx.beginPath();
                                this.ctx.strokeStyle = `rgba(0, 255, 255, ${opacity * 0.3})`;
                                this.ctx.lineWidth = 0.5;
                                this.ctx.moveTo(this.particles[i].x, this.particles[i].y);
                                this.ctx.lineTo(this.particles[j].x, this.particles[j].y);
                                this.ctx.stroke();
                            }
                        }
                    }
                }

                animate(currentTime) {
                    if (document.hidden) {
                        this.animationId = null;
                        return;
                    }
                    
                    this.animationId = requestAnimationFrame((time) => this.animate(time));
                    
                    const elapsed = currentTime - this.lastTime;
                    
                    if (elapsed > this.fpsInterval) {
                        this.lastTime = currentTime - (elapsed % this.fpsInterval);
                                                this.update();
                        this.draw();
                    }
                }
            }

            function isIOS() {
                return /iPhone|iPad|iPod/i.test(navigator.userAgent);
            }

            function isStandalone() {
                return window.matchMedia('(display-mode: standalone)').matches || 
                       window.navigator.standalone === true;
            }

            let deferredPrompt = null;
            const installPrompt = document.getElementById('installPrompt');
            const installButton = document.getElementById('installButton');
            const installText = document.getElementById('installText');

            function hideInstallPrompt() {
                if (installPrompt) {
                    installPrompt.classList.remove('show');
                    safeLocalStorage('installPromptClosed', 'true');
                }
            }

            function showInstallPrompt() {
                if (installPrompt) {
                    installPrompt.classList.add('show');
                }
            }

            function showIOSInstallGuide() {
                if (installText && installButton) {
                    installText.innerHTML = 'üì± ÈªûÊìä <strong>ÂàÜ‰∫´ üì§</strong> ‚Üí <strong>Âä†ÂÖ•‰∏ªÁï´Èù¢</strong>';
                    installButton.textContent = 'Áü•ÈÅì‰∫Ü';
                    
                    const newButton = installButton.cloneNode(true);
                    installButton.parentNode.replaceChild(newButton, installButton);
                    
                    document.getElementById('installButton').addEventListener('click', (e) => {
                        e.preventDefault();
                        hideInstallPrompt();
                    });
                    
                    showInstallPrompt();
                }
            }

            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                
                const promptClosed = safeLocalStorage('installPromptClosed');
                if (!isIOS() && !isStandalone() && promptClosed !== 'true') {
                    showInstallPrompt();
                }
            });

            if (installButton) {
                installButton.addEventListener('click', async (e) => {
                    e.preventDefault();
                    
                    if (!deferredPrompt) return;

                    try {
                        deferredPrompt.prompt();
                        const { outcome } = await deferredPrompt.userChoice;
                        console.log(`Áî®Êà∂ÈÅ∏Êìá: ${outcome}`);
                    } catch (error) {
                        console.error('ÂÆâË£ùÊèêÁ§∫Â§±Êïó:', error);
                    } finally {
                        deferredPrompt = null;
                        hideInstallPrompt();
                    }
                });
            }

            window.addEventListener('appinstalled', () => {
                console.log('‚úÖ PWA Â∑≤ÂÆâË£ù');
                hideInstallPrompt();
            });

            // ‚úÖ ‰øÆÊ≠£Ôºö‰ΩøÁî®Â§ñÈÉ® Service Worker
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('./sw.js')
                        .then(registration => {
                            console.log('‚úÖ Service Worker Ë®ªÂÜäÊàêÂäü:', registration.scope);
                            
                            // Ê™¢Êü•Êõ¥Êñ∞
                            registration.addEventListener('updatefound', () => {
                                const newWorker = registration.installing;
                                console.log('üîÑ ÁôºÁèæÊñ∞ÁâàÊú¨ Service Worker');
                                
                                newWorker.addEventListener('statechange', () => {
                                    if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                        console.log('‚ú® Êñ∞ÁâàÊú¨Â∑≤ÂÆâË£ù');
                                        // ÂèØÈÅ∏ÔºöÊèêÁ§∫Áî®Êà∂ÈáçÊñ∞ËºâÂÖ•
                                        if (confirm('ÁôºÁèæÊñ∞ÁâàÊú¨ÔºåÊòØÂê¶Á´ãÂç≥Êõ¥Êñ∞Ôºü')) {
                                            newWorker.postMessage({ type: 'SKIP_WAITING' });
                                            window.location.reload();
                                        }
                                    }
                                });
                            });

                            // ÂÆöÊúüÊ™¢Êü•Êõ¥Êñ∞
                            setInterval(() => {
                                registration.update();
                            }, 60000); // ÊØèÂàÜÈêòÊ™¢Êü•‰∏ÄÊ¨°
                        })
                        .catch(error => {
                            console.error('‚ùå Service Worker Ë®ªÂÜäÂ§±Êïó:', error);
                        });

                    // Áõ£ËÅΩ Service Worker ÊéßÂà∂Ê¨äËÆäÊõ¥
                    let refreshing = false;
                    navigator.serviceWorker.addEventListener('controllerchange', () => {
                        if (refreshing) return;
                        refreshing = true;
                        console.log('üîÑ Service Worker Â∑≤Êõ¥Êñ∞ÔºåÈáçÊñ∞ËºâÂÖ•È†ÅÈù¢');
                        window.location.reload();
                    });
                });
            }

            // ‚úÖ Á¢∫‰øù DOM ËºâÂÖ•ÂÆåÊàêÂæåÂàùÂßãÂåñ
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', init);
            } else {
                init();
            }

            function init() {
                try {
                    console.log('üöÄ ÂàùÂßãÂåñÊáâÁî®Á®ãÂºè...');
                    
                    // Ê∏≤ÊüìÊáâÁî®Âç°Áâá
                    renderApps();
                    
                    // Âª∂ÈÅ≤ÂïüÂãïÁ≤íÂ≠êÁ≥ªÁµ±‰ª•ÊèêÂçáÂàùÂßãËºâÂÖ•ÈÄüÂ∫¶
                    setTimeout(() => {
                        new ParticleSystem();
                    }, 500);
                    
                    // Â¶ÇÊûúÂ∑≤Á∂ìÊòØÁç®Á´ãÊ®°ÂºèÔºå‰∏çÈ°ØÁ§∫ÂÆâË£ùÊèêÁ§∫
                    if (isStandalone()) {
                        console.log('‚úÖ ÊáâÁî®Â∑≤Âú®Áç®Á´ãÊ®°ÂºèÈÅãË°å');
                        return;
                    }

                    // Ê™¢Êü•ÊòØÂê¶Â∑≤ÈóúÈñâÂÆâË£ùÊèêÁ§∫
                    const promptClosed = safeLocalStorage('installPromptClosed');
                    if (promptClosed === 'true') {
                        console.log('‚ÑπÔ∏è Áî®Êà∂Â∑≤ÈóúÈñâÂÆâË£ùÊèêÁ§∫');
                        return;
                    }

                    // iOS Ë®≠ÂÇôÈ°ØÁ§∫ÂÆâË£ùÊåáÂçó
                    if (isIOS()) {
                        setTimeout(() => showIOSInstallGuide(), 2000);
                    }

                    console.log('‚úÖ ÂàùÂßãÂåñÂÆåÊàê');
                } catch (error) {
                    console.error('‚ùå ÂàùÂßãÂåñÂ§±Êïó:', error);
                    
                    // È°ØÁ§∫ÈåØË™§Ë®äÊÅØ
                    const grid = document.getElementById('appsGrid');
                    if (grid) {
                        grid.innerHTML = `
                            <div style="grid-column: 1 / -1; text-align: center; color: #00ffff; padding: 40px;">
                                <div style="font-size: 3rem; margin-bottom: 20px;">‚ö†Ô∏è</div>
                                <div style="font-size: 1.5rem; margin-bottom: 10px;">ËºâÂÖ•Â§±Êïó</div>
                                <div style="opacity: 0.7; margin-bottom: 20px;">
                                    ÁôºÁîüÈåØË™§: ${escapeHtml(error.message)}
                                </div>
                                <button onclick="location.reload()" style="
                                    margin-top: 20px; 
                                    padding: 10px 30px; 
                                    background: linear-gradient(135deg, #0064ff 0%, #00ffff 100%); 
                                    color: white; 
                                    border: none; 
                                    cursor: pointer; 
                                    font-weight: bold;
                                    font-size: 1rem;
                                    border-radius: 5px;
                                    box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
                                ">
                                    üîÑ ÈáçÊñ∞ËºâÂÖ•
                                </button>
                            </div>
                        `;
                    }
                }
            }

            // Èò≤Ê≠¢ÂúñÁâáË¢´ÊãñÊõ≥
            document.addEventListener('dragstart', (e) => {
                if (e.target.tagName === 'IMG') {
                    e.preventDefault();
                }
            });

            // ÈüøÊáâÂºèËôïÁêÜ
            window.addEventListener('resize', debounce(() => {
                console.log('üìê Ë¶ñÁ™óÂ§ßÂ∞èÊîπËÆäÔºåÈáçÊñ∞Ë™øÊï¥Â∏ÉÂ±Ä');
                
                // Ê∏ÖÈô§ÊâÄÊúâÁ£ÅÂê∏ÊïàÊûú
                const appItems = document.querySelectorAll('.app-item');
                appItems.forEach(item => {
                    item.classList.remove('magnetic-active');
                    item.style.setProperty('--magnetic-x', '0px');
                    item.style.setProperty('--magnetic-y', '0px');
                    
                    // Ê∏ÖÈô§Èï∑ÊåâË®àÊôÇÂô®
                    const timer = touchTimers.get(item);
                    if (timer) {
                        clearTimeout(timer);
                        touchTimers.delete(item);
                    }
                });
                
                // Ê†πÊìöËû¢ÂπïÂØ¨Â∫¶Ë™øÊï¥Âç°ÁâáËÉåÈù¢
                if (window.innerWidth > CONFIG.breakpoints.mobile) {
                    const cards = document.querySelectorAll('.app-card');
                    cards.forEach((card, index) => {
                        const hasBack = card.querySelector('.card-back');
                        if (!hasBack && apps[index]) {
                            const back = createCardBack(apps[index]);
                            card.appendChild(back);
                        }
                    });
                } else {
                    const backs = document.querySelectorAll('.card-back');
                    backs.forEach(back => back.remove());
                }
            }, 250));

            // iOS Èò≤Ê≠¢ÈÅéÂ∫¶ÊªæÂãï
            if (isIOS()) {
                let startY = 0;
                
                document.body.addEventListener('touchstart', function(e) {
                    startY = e.touches[0].pageY;
                }, { passive: false });
                
                document.body.addEventListener('touchmove', function(e) {
                    const currentY = e.touches[0].pageY;
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    const scrollHeight = document.documentElement.scrollHeight;
                    const clientHeight = document.documentElement.clientHeight;
                    
                    // Èò≤Ê≠¢È†ÇÈÉ®ÂíåÂ∫ïÈÉ®ÈÅéÂ∫¶ÊªæÂãï
                    if ((scrollTop <= 0 && currentY > startY) || 
                        (scrollTop + clientHeight >= scrollHeight && currentY < startY)) {
                        e.preventDefault();
                    }
                }, { passive: false });
            }

            // ESC ÈçµÈóúÈñâ Modal
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    const detailModal = document.getElementById('detailModal');
                    if (detailModal && detailModal.classList.contains('show')) {
                        detailModal.classList.remove('show');
                    }
                    
                    const installPrompt = document.getElementById('installPrompt');
                    if (installPrompt && installPrompt.classList.contains('show')) {
                        hideInstallPrompt();
                    }
                }
            });

            // ÂÖ®Â±ÄÈåØË™§ËôïÁêÜ
            window.addEventListener('error', (e) => {
                console.error('‚ùå ÂÖ®Â±ÄÈåØË™§:', e.error);
            });

            window.addEventListener('unhandledrejection', (e) => {
                console.error('‚ùå Êú™ËôïÁêÜÁöÑ Promise ÊãíÁµï:', e.reason);
            });

            // Êö¥Èú≤ API ‰æõÂ§ñÈÉ®‰ΩøÁî®
            window.AppPortal = {
                version: '2.1.0',
                renderApps: renderApps,
                config: CONFIG,
                apps: apps
            };

            console.log('üéâ Êò∂ÈùíÈõÜÂúò AI-GATE Â∑≤ËºâÂÖ•ÂÆåÊàê');

        })();
    </script>
</body>
</html>

