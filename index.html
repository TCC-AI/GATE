<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a0e27">
    <meta name="description" content="æ˜¶é’é›†åœ˜æ‡‰ç”¨ç¨‹å¼å…¥å£ - GAIé©…å‹•æ™ºæ…§ç®¡ç†å¹³å°">
    <!-- ğŸ”’ æ·»åŠ  CSP å®‰å…¨ç­–ç•¥ -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; script-src 'self' 'unsafe-inline'; connect-src 'self';">
    <title>æ˜¶é’é›†åœ˜æ‡‰ç”¨ç¨‹å¼å…¥å£ - GAIé©…å‹•æ™ºæ…§ç®¡ç†å¹³å°</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuaYtumdkumbhuWcmCBBSS1HQVRFIiwKICAic2hvcnRfbmFtZSI6ICJBSS1HQVRFIiwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiMwYTBlMjciLAogICJ0aGVtZV9jb2xvciI6ICIjMGEwZTI3IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiUjAucG5nIiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciLAogICAgICAicHVycG9zZSI6ICJhbnkgbWFza2FibGUiCiAgICB9LAogICAgewogICAgICAic3JjIjogIlIwLnBuZyIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIiwKICAgICAgInB1cnBvc2UiOiAiYW55IG1hc2thYmxlIgogICAgfQogIF0sCiAgImRlc2NyaXB0aW9uIjogIuaYtumdkumbhuWcmEFJ5oeA5oWn566h55CG5bmz5Y+wIiwKICAib3JpZW50YXRpb24iOiAicG9ydHJhaXQiCn0=">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="R0.png">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rajdhani', 'Noto Sans TC', sans-serif;
            min-height: 100vh;
            background: #0a0e27;
            position: relative;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            /* âœ… iOS å®‰å…¨å€åŸŸæ”¯æŒ */
            padding-top: max(20px, env(safe-area-inset-top));
            padding-bottom: max(20px, env(safe-area-inset-bottom));
        }

        /* é›»è·¯æ¿ç¶²æ ¼èƒŒæ™¯ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: 0;
            pointer-events: none;
        }

        /* å‹•æ…‹æƒæç·šæ•ˆæœ */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 255, 255, 0.8) 50%, 
                transparent 100%);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
            animation: scanLine 4s linear infinite;
            z-index: 0;
            pointer-events: none;
        }

        @keyframes scanLine {
            0% { top: 0%; }
            100% { top: 100%; }
        }

        /* âœ… æ¸›å°‘å‹•ç•«æ”¯æŒ */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            body::after {
                animation: none;
            }
            
            .app-item:hover .app-card {
                transform: none !important;
            }
        }

        /* æ•¸ä½ç²’å­èƒŒæ™¯ Canvas */
        #particleCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        /* å…§å®¹å®¹å™¨ */
        .content-wrapper {
            position: relative;
            z-index: 1;
            width: 100%;
            max-width: 1400px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Logo å®¹å™¨ - æ­£ 10 é‚Šå½¢ */
        .logo-container {
            margin-bottom: 20px;
            animation: fadeInDown 0.8s ease-out;
            position: relative;
            filter: drop-shadow(0 0 30px rgba(0, 255, 255, 0.6));
        }

        .logo {
            width: 120px;
            height: 120px;
            object-fit: contain;
            clip-path: polygon(
                50% 0%, 
                80.9% 9.5%, 
                97.6% 34.5%, 
                97.6% 65.5%, 
                80.9% 90.5%, 
                50% 100%, 
                19.1% 90.5%, 
                2.4% 65.5%, 
                2.4% 34.5%, 
                19.1% 9.5%
            );
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            animation: float 6s ease-in-out infinite, rotate3D 20s linear infinite;
        }

        .logo:hover {
            transform: scale(1.15);
            filter: drop-shadow(0 0 50px rgba(0, 255, 255, 1));
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }

        @keyframes rotate3D {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        /* æ¨™é¡Œ - éœ“è™¹ç§‘æŠ€å­—é«” */
        .title {
            font-family: 'Orbitron', 'Rajdhani', sans-serif;
            font-size: 4rem;
            font-weight: 900;
            color: #00ffff;
            text-align: center;
            margin-bottom: 40px;
            letter-spacing: 8px;
            text-transform: uppercase;
            text-shadow: 
                0 0 10px rgba(0, 255, 255, 0.8),
                0 0 20px rgba(0, 255, 255, 0.6),
                0 0 30px rgba(0, 255, 255, 0.4),
                0 0 40px rgba(0, 100, 255, 0.3);
            animation: fadeInDown 0.8s ease-out 0.2s both, 
                       neonPulse 2s ease-in-out infinite alternate;
            position: relative;
        }

        .title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60%;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                #00ffff 50%, 
                transparent 100%);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
        }

        @keyframes neonPulse {
            from { 
                text-shadow: 
                    0 0 10px rgba(0, 255, 255, 0.8),
                    0 0 20px rgba(0, 255, 255, 0.6),
                    0 0 30px rgba(0, 255, 255, 0.4);
            }
            to { 
                text-shadow: 
                    0 0 20px rgba(0, 255, 255, 1),
                    0 0 30px rgba(0, 255, 255, 0.8),
                    0 0 40px rgba(0, 255, 255, 0.6),
                    0 0 50px rgba(0, 100, 255, 0.4);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ä¸»å®¹å™¨ - ç§‘æŠ€æ„Ÿé‚Šæ¡† */
        .main-container {
            background: rgba(10, 14, 39, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 0;
            padding: 40px;
            border: 2px solid rgba(0, 255, 255, 0.3);
            box-shadow: 
                0 0 20px rgba(0, 255, 255, 0.2),
                inset 0 0 30px rgba(0, 255, 255, 0.05);
            max-width: 1400px;
            width: 100%;
            animation: fadeInUp 0.8s ease-out 0.4s both;
            position: relative;
            overflow: hidden;
            clip-path: polygon(
                0 0, 
                calc(100% - 20px) 0, 
                100% 20px, 
                100% 100%, 
                20px 100%, 
                0 calc(100% - 20px)
            );
        }

        .main-container::before,
        .main-container::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid #00ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.6);
        }

        .main-container::before {
            top: 10px;
            left: 10px;
            border-right: none;
            border-bottom: none;
        }

        .main-container::after {
            bottom: 10px;
            right: 10px;
            border-left: none;
            border-top: none;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* PC ç‰ˆ - çµ±ä¸€é«˜åº¦ 200px çš„ç¶²æ ¼ä½ˆå±€ */
        .apps-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-auto-rows: 200px;
            gap: 20px;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .app-item:nth-child(1) {
            grid-column: span 1;
            grid-row: span 1;
        }

        .app-item:nth-child(5) {
            grid-column: span 1;
        }

        /* âœ… 3D ç¿»è½‰å¡ç‰‡ - ä¿®æ­£ transform-style */
        .app-item {
            perspective: 1000px;
            cursor: pointer;
            position: relative;
            text-decoration: none;
            transition: transform 0.3s ease;
            z-index: 1;
            isolation: isolate;
        }

        /* âœ… æ·»åŠ ç„¦é»æ¨£å¼ */
        .app-item:focus {
            outline: 2px solid #00ffff;
            outline-offset: 4px;
        }

        .app-item:hover {
            z-index: 10;
        }

        .app-card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d; /* âœ… ä¿®æ­£ï¼šflat â†’ preserve-3d */
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* PC ç‰ˆç¿»è½‰æ•ˆæœ */
        @media (min-width: 769px) {
            .app-item:hover .app-card {
                transform: rotateY(180deg);
            }
        }

        /* å¡ç‰‡æ­£é¢ - ç§‘æŠ€æ„Ÿè¨­è¨ˆ */
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 0;
            overflow: hidden;
            transform-style: preserve-3d; /* âœ… ä¿®æ­£ï¼šflat â†’ preserve-3d */
        }

        .card-front {
            background: rgba(15, 20, 45, 0.9);
            border: 2px solid rgba(0, 255, 255, 0.3);
            box-shadow: 
                0 0 20px rgba(0, 255, 255, 0.2),
                inset 0 0 30px rgba(0, 255, 255, 0.05);
            display: flex;
            flex-direction: row;
            align-items: center;
            padding: 25px;
            transition: all 0.3s ease;
            clip-path: polygon(
                0 0, 
                calc(100% - 15px) 0, 
                100% 15px, 
                100% 100%, 
                15px 100%, 
                0 calc(100% - 15px)
            );
            position: relative;
            z-index: 2;
        }

        .card-front::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 255, 255, 0.1) 50%, 
                transparent 100%);
            transition: left 0.5s ease;
        }

        .app-item:hover .card-front::before {
            left: 100%;
        }

        .app-item:hover .card-front {
            border-color: rgba(0, 255, 255, 0.6);
            box-shadow: 
                0 0 30px rgba(0, 255, 255, 0.4),
                inset 0 0 40px rgba(0, 255, 255, 0.1);
        }

        /* å¡ç‰‡èƒŒé¢ - éœ“è™¹æ¼¸è®Š */
        .card-back {
            background: linear-gradient(135deg, 
                rgba(0, 100, 255, 0.9) 0%, 
                rgba(0, 255, 255, 0.9) 100%);
            border: 2px solid rgba(0, 255, 255, 0.5);
            transform: rotateY(180deg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 25px;
            color: white;
            clip-path: polygon(
                0 0, 
                calc(100% - 15px) 0, 
                100% 15px, 
                100% 100%, 
                15px 100%, 
                0 calc(100% - 15px)
            );
            z-index: 1;
        }

        .card-back-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            white-space: pre-line; /* âœ… æ”¯æŒ \n æ›è¡Œ */
        }

        .card-back-desc {
            font-size: 0.9rem;
            text-align: center;
            opacity: 0.9;
            line-height: 1.5;
        }

        .card-back-action {
            margin-top: 18px;
            padding: 10px 25px;
            background: white;
            color: #0064ff;
            border-radius: 0;
            font-weight: 700;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            clip-path: polygon(5px 0, 100% 0, 100% calc(100% - 5px), calc(100% - 5px) 100%, 0 100%, 0 5px);
        }

        .card-back-action:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        /* åœ–æ¨™å®¹å™¨ - æ­£ 10 é‚Šå½¢é‚Šæ¡† */
        .app-icon-wrapper {
            width: 150px;
            height: 150px;
            flex-shrink: 0;
            margin-right: 15px;
            position: relative;
        }

        .app-icon {
            width: 100%;
            height: 100%;
            border-radius: 0;
            background: linear-gradient(135deg, #0064ff 0%, #00ffff 100%);
            padding: 3px;
            box-shadow: 
                0 0 20px rgba(0, 255, 255, 0.4),
                inset 0 0 20px rgba(0, 255, 255, 0.2);
            transition: all 0.3s ease;
            clip-path: polygon(
                50% 0%, 
                80.9% 9.5%, 
                97.6% 34.5%, 
                97.6% 65.5%, 
                80.9% 90.5%, 
                50% 100%, 
                19.1% 90.5%, 
                2.4% 65.5%, 
                2.4% 34.5%, 
                19.1% 9.5%
            );
        }

        .app-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            background: #0a0e27;
            clip-path: polygon(
                50% 0%, 
                80.9% 9.5%, 
                97.6% 34.5%, 
                97.6% 65.5%, 
                80.9% 90.5%, 
                50% 100%, 
                19.1% 90.5%, 
                2.4% 65.5%, 
                2.4% 34.5%, 
                19.1% 9.5%
            );
        }

        /* âœ… åœ–æ¨™éŒ¯èª¤ä½”ä½ç¬¦ */
        .icon-fallback {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            font-size: 3rem;
            color: #00ffff;
        }

        /* æ–‡å­—å€åŸŸ */
        .app-text-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: left;
            min-width: 0;
        }

        .app-name {
            font-family: 'Orbitron', 'Rajdhani', sans-serif;
            font-size: 1.5rem;
            font-weight: 900;
            color: #00ffff;
            text-shadow: 
                0 0 10px rgba(0, 255, 255, 0.8),
                0 0 20px rgba(0, 255, 255, 0.4);
            margin-bottom: 8px;
            line-height: 1.3;
            text-transform: uppercase;
            letter-spacing: 2px;
            white-space: pre-line; /* âœ… æ”¯æŒ \n æ›è¡Œ */
        }

        .app-desc {
            font-size: 0.9rem;
            font-weight: 400;
            color: rgba(0, 255, 255, 0.8); /* âœ… æé«˜å°æ¯”åº¦ */
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* ç£å¸æ•ˆæœ */
        .app-item {
            --magnetic-x: 0;
            --magnetic-y: 0;
        }

        .app-item.magnetic-active {
            transform: translate(var(--magnetic-x), var(--magnetic-y)) scale(1.02);
        }

        /* é•·æŒ‰è©³æƒ…å½ˆçª— - ç§‘æŠ€é¢¨ */
        .detail-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .detail-modal.show {
            opacity: 1;
            pointer-events: auto;
        }

        .detail-content {
            background: linear-gradient(135deg, 
                rgba(0, 100, 255, 0.95) 0%, 
                rgba(0, 255, 255, 0.95) 100%);
            backdrop-filter: blur(20px);
            border-radius: 0;
            padding: 40px;
            max-width: 90%;
            width: 400px;
            color: white;
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.3s ease;
            border: 2px solid rgba(0, 255, 255, 0.5);
            box-shadow: 0 0 40px rgba(0, 255, 255, 0.6);
            clip-path: polygon(
                0 0, 
                calc(100% - 20px) 0, 
                100% 20px, 
                100% 100%, 
                20px 100%, 
                0 calc(100% - 20px)
            );
        }

        .detail-modal.show .detail-content {
            transform: scale(1);
        }

        .detail-icon {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            border-radius: 0;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            clip-path: polygon(
                50% 0%, 
                80.9% 9.5%, 
                97.6% 34.5%, 
                97.6% 65.5%, 
                80.9% 90.5%, 
                50% 100%, 
                19.1% 90.5%, 
                2.4% 65.5%, 
                2.4% 34.5%, 
                19.1% 9.5%
            );
        }

        .detail-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .detail-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            white-space: pre-line; /* âœ… æ”¯æŒ \n æ›è¡Œ */
        }

        .detail-desc {
            font-size: 1rem;
            line-height: 1.6;
            opacity: 0.9;
            margin-bottom: 25px;
        }

        .detail-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .detail-button {
            padding: 12px 30px;
            border-radius: 0;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-family: 'Rajdhani', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            clip-path: polygon(5px 0, 100% 0, 100% calc(100% - 5px), calc(100% - 5px) 100%, 0 100%, 0 5px);
        }

        .detail-button.primary {
            background: white;
            color: #0064ff;
        }

        .detail-button.secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .detail-button:active {
            transform: scale(0.95);
        }

        /* PWA å®‰è£æç¤º - ç§‘æŠ€é¢¨ */
        .install-prompt {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(150px);
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(0, 255, 255, 0.5);
            color: #00ffff;
            padding: 18px 35px;
            border-radius: 0;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.4);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
        }

        .install-prompt.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
            pointer-events: auto;
        }

        .install-prompt button {
            background: linear-gradient(135deg, #0064ff 0%, #00ffff 100%);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 0;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', sans-serif;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
            clip-path: polygon(5px 0, 100% 0, 100% calc(100% - 5px), calc(100% - 5px) 100%, 0 100%, 0 5px);
        }

        .install-prompt button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.6);
        }

        /* ==================== æ‰‹æ©Ÿç‰ˆæ¨£å¼ ==================== */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            .title {
                font-size: 2.5rem;
                letter-spacing: 4px;
                margin-bottom: 25px;
            }

            .logo {
                width: 90px;
                height: 90px;
            }

            .main-container {
                padding: 25px 15px;
            }

            .apps-grid {
                display: flex;
                flex-direction: column;
                gap: 20px;
                padding: 15px 5px;
            }

            .app-item {
                width: 100%;
                height: 160px;
                perspective: none;
            }

            .card-front {
                padding: 20px;
            }

            .app-icon-wrapper {
                width: 120px;
                height: 120px;
                margin-right: 15px;
            }

            .app-name {
                font-size: 1.2rem;
            }

            .app-desc {
                font-size: 0.85rem;
                -webkit-line-clamp: 2;
            }

            .app-card {
                transform: none !important;
            }

            .card-back {
                display: none;
            }

            .app-item:active {
                transform: scale(0.98);
            }

            .detail-content {
                padding: 30px 25px;
                width: 85%;
            }

            .detail-icon {
                width: 80px;
                height: 80px;
            }

            .detail-title {
                font-size: 1.5rem;
            }

            .detail-desc {
                font-size: 0.9rem;
            }

            .detail-buttons {
                flex-direction: column;
                gap: 10px;
            }

            .detail-button {
                width: 100%;
            }

            .install-prompt {
                bottom: 20px;
                padding: 15px 25px;
                font-size: 0.9rem;
                max-width: 90%;
            }

            .install-prompt button {
                padding: 8px 20px;
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 2rem;
                letter-spacing: 2px;
            }

            .logo {
                width: 75px;
                height: 75px;
            }

            .main-container {
                padding: 20px 12px;
            }

            .apps-grid {
                gap: 15px;
            }

            .app-item {
                height: 140px;
            }

            .app-icon-wrapper {
                width: 100px;
                height: 100px;
            }

            .app-name {
                font-size: 1.1rem;
            }

            .app-desc {
                font-size: 0.8rem;
            }
        }

        /* å¹³æ¿ç‰ˆ */
        @media (min-width: 769px) and (max-width: 1200px) {
            .apps-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- æ•¸ä½ç²’å­èƒŒæ™¯ -->
    <canvas id="particleCanvas"></canvas>

    <!-- å…§å®¹å®¹å™¨ -->
    <div class="content-wrapper">
        <!-- Logo -->
        <div class="logo-container">
            <img src="R0.png" alt="æ˜¶é’é›†åœ˜ Logo" class="logo" loading="eager">
        </div>

        <!-- æ¨™é¡Œ -->
        <h1 class="title">æ˜¶é’é›†åœ˜æ‡‰ç”¨ç¨‹å¼å…¥å£<br>GAIé©…å‹•æ™ºæ…§ç®¡ç†å¹³å°</h1>

        <!-- ä¸»å®¹å™¨ -->
        <div class="main-container">
            <div class="apps-grid" id="appsGrid"></div>
        </div>
    </div>

    <!-- é•·æŒ‰è©³æƒ…å½ˆçª— -->
    <div class="detail-modal" id="detailModal" role="dialog" aria-modal="true" aria-labelledby="detailTitle">
        <div class="detail-content">
            <div class="detail-icon" id="detailIcon"></div>
            <div class="detail-title" id="detailTitle"></div>
            <div class="detail-desc" id="detailDesc"></div>
            <div class="detail-buttons">
                <button class="detail-button primary" id="detailOpen">ç«‹å³é–‹å•Ÿ</button>
                <button class="detail-button secondary" id="detailClose">é—œé–‰</button>
            </div>
        </div>
    </div>

    <!-- PWA å®‰è£æç¤º -->
    <div class="install-prompt" id="installPrompt" role="alert">
        <span id="installText">ğŸ“± å°‡ AI-GATE åŠ å…¥ä¸»ç•«é¢</span>
        <button id="installButton">å®‰è£</button>
    </div>

    <script>
        // âœ… ä½¿ç”¨ IIFE å°è£ï¼Œé¿å…å…¨å±€è®Šé‡æ±¡æŸ“
        (function() {
            'use strict';

            // âœ… é…ç½®ç®¡ç†
            const CONFIG = {
                particles: {
                    mobile: { count: 40, maxDistance: 120 },
                    desktop: { count: 80, maxDistance: 150 }
                },
                interactions: {
                    longPressDelay: 500,
                    magneticStrength: 0.1,
                    magneticMaxOffset: 15
                },
                breakpoints: {
                    mobile: 768,
                    tablet: 1200
                }
            };

            // âœ… æ‡‰ç”¨ç¨‹å¼æ•¸æ“šï¼ˆä½¿ç”¨ \n ä»£æ›¿ <br>ï¼‰
            const apps = [
                { 
                    name: 'GAIæ•¸ä½è³‡æ–™ä¸­å¿ƒ\nã€Willionã€‘', 
                    icon: 'app1.png', 
                    url: 'https://tcc-ai.github.io/digidata/',
                    desc: 'æ™ºèƒ½æ•¸ä½è³‡æ–™èˆ‡ç®¡ç†å¹³å°ï¼Œæä¾›å³æ™‚æ–‡ä»¶æŸ¥é–±èˆ‡è¦–è¦ºåŒ–å ±è¡¨'
                },
                { 
                    name: 'GAIé¢¨æ§ç®¡ç†ä¸­å¿ƒ\nã€Tinaã€‘', 
                    icon: 'app2.png', 
                    url: 'https://tcc-ai.github.io/Risk/',
                    desc: 'å³æ™‚é¢¨éšªç›£æ§èˆ‡é è­¦ç³»çµ±ï¼Œä¿éšœä¼æ¥­ç‡Ÿé‹å®‰å…¨'
                },
                { 
                    name: 'GAIè·¯å¾‘è¦åŠƒä¸­å¿ƒ\nã€Lisaã€‘', 
                    icon: 'app3.png', 
                    url: 'https://tcc-ai.github.io/GAIRoute/',
                    desc: 'æ™ºèƒ½ç‰©æµè·¯ç·šå„ªåŒ–ï¼Œé™ä½é‹è¼¸æˆæœ¬æå‡æ•ˆç‡'
                },
                { 
                    name: 'GAIæ’æ´¾è»Šä¸­å¿ƒ\nã€Lisaã€‘', 
                    icon: 'app3.png', 
                    url: 'https://tcc-ai.github.io/GAITransporter/',
                    desc: 'è‡ªå‹•åŒ–è»Šè¼›èª¿åº¦ç³»çµ±ï¼Œå¯¦ç¾æ™ºèƒ½æ´¾è»Šç®¡ç†'
                },
                { 
                    name: 'GAIæ™ºæ…§åº«å­˜ä¸­å¿ƒ\nã€Elonã€‘', 
                    icon: 'app4.png', 
                    url: 'https://tcc-ai.github.io/GAIstock/',
                    desc: 'æ™ºèƒ½åº«å­˜é æ¸¬èˆ‡ç®¡ç†ï¼Œå„ªåŒ–åº«å­˜é€±è½‰ç‡'
                },
                { 
                    name: 'GAIæ™ºèƒ½è·è¨“ä¸­å¿ƒ\nã€Sophiaã€‘', 
                    icon: 'app5.png', 
                    url: 'https://tcc-ai.github.io/TRAIN/',
                    desc: 'å€‹æ€§åŒ–å“¡å·¥åŸ¹è¨“å¹³å°ï¼Œæå‡åœ˜éšŠå°ˆæ¥­èƒ½åŠ›'
                },
                { 
                    name: 'æ‡‰ç”¨ç¨‹å¼ 7', 
                    icon: 'app7.png', 
                    url: 'https://example.com/app7',
                    desc: 'æ›´å¤šå‰µæ–°åŠŸèƒ½å³å°‡æ¨å‡ºï¼Œæ•¬è«‹æœŸå¾…'
                },
                { 
                    name: 'æ‡‰ç”¨ç¨‹å¼ 8', 
                    icon: 'app8.png', 
                    url: 'https://example.com/app8',
                    desc: 'æ›´å¤šå‰µæ–°åŠŸèƒ½å³å°‡æ¨å‡ºï¼Œæ•¬è«‹æœŸå¾…'
                },
                { 
                    name: 'æ‡‰ç”¨ç¨‹å¼ 9', 
                    icon: 'app9.png', 
                    url: 'https://example.com/app9',
                    desc: 'æ›´å¤šå‰µæ–°åŠŸèƒ½å³å°‡æ¨å‡ºï¼Œæ•¬è«‹æœŸå¾…'
                },
                { 
                    name: 'æ‡‰ç”¨ç¨‹å¼ 10', 
                    icon: 'app10.png', 
                    url: 'https://example.com/app10',
                    desc: 'æ›´å¤šå‰µæ–°åŠŸèƒ½å³å°‡æ¨å‡ºï¼Œæ•¬è«‹æœŸå¾…'
                }
            ];

            // âœ… å·¥å…·å‡½æ•¸ï¼šHTML è½‰ç¾©
            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            // âœ… å·¥å…·å‡½æ•¸ï¼šç¯€æµ
            function throttle(func, limit) {
                let inThrottle;
                return function(...args) {
                    if (!inThrottle) {
                        func.apply(this, args);
                        inThrottle = true;
                        setTimeout(() => inThrottle = false, limit);
                    }
                };
            }

            // âœ… å·¥å…·å‡½æ•¸ï¼šé˜²æŠ–
            function debounce(func, wait) {
                let timeout;
                return function(...args) {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(this, args), wait);
                };
            }

            // âœ… å®‰å…¨çš„ localStorage æ“ä½œ
            function safeLocalStorage(key, value) {
                try {
                    if (value === undefined) {
                        return localStorage.getItem(key);
                    }
                    localStorage.setItem(key, value);
                    return true;
                } catch (e) {
                    console.warn('localStorage ä¸å¯ç”¨:', e);
                    return value === undefined ? null : false;
                }
            }

            // âœ… å‰µå»ºåœ–æ¨™å…ƒç´ ï¼ˆä¿®æ­£éŒ¯èª¤è™•ç†ï¼‰
            function createAppIcon(app) {
                const wrapper = document.createElement('div');
                wrapper.className = 'app-icon-wrapper';
                
                const iconDiv = document.createElement('div');
                iconDiv.className = 'app-icon';
                
                const img = document.createElement('img');
                img.src = app.icon;
                img.alt = escapeHtml(app.name);
                img.loading = 'lazy';
                img.decoding = 'async';
                
                // âœ… ä½¿ç”¨äº‹ä»¶ç›£è½å™¨ä»£æ›¿å…§è¯è™•ç†
                img.addEventListener('error', function() {
                    const fallback = document.createElement('div');
                    fallback.className = 'icon-fallback';
                    fallback.textContent = 'âš¡';
                    this.parentElement.innerHTML = '';
                    this.parentElement.appendChild(fallback);
                });
                
                iconDiv.appendChild(img);
                wrapper.appendChild(iconDiv);
                return wrapper;
            }

            // âœ… å‰µå»ºå¡ç‰‡æ­£é¢
            function createCardFront(app) {
                const front = document.createElement('div');
                front.className = 'card-front';
                
                // åœ–æ¨™
                const iconWrapper = createAppIcon(app);
                
                // æ–‡å­—
                const textWrapper = document.createElement('div');
                textWrapper.className = 'app-text-wrapper';
                
                const name = document.createElement('div');
                name.className = 'app-name';
                name.textContent = app.name; // âœ… ä½¿ç”¨ textContentï¼ŒCSS è™•ç†æ›è¡Œ
                
                const desc = document.createElement('div');
                desc.className = 'app-desc';
                desc.textContent = app.desc;
                
                textWrapper.appendChild(name);
                textWrapper.appendChild(desc);
                
                front.appendChild(iconWrapper);
                front.appendChild(textWrapper);
                
                return front;
            }

            // âœ… å‰µå»ºå¡ç‰‡èƒŒé¢
            function createCardBack(app) {
                const back = document.createElement('div');
                back.className = 'card-back';
                
                const title = document.createElement('div');
                title.className = 'card-back-title';
                title.textContent = app.name;
                
                const desc = document.createElement('div');
                desc.className = 'card-back-desc';
                desc.textContent = app.desc;
                
                const action = document.createElement('div');
                action.className = 'card-back-action';
                action.textContent = 'ç«‹å³é–‹å•Ÿ â†’';
                
                back.appendChild(title);
                back.appendChild(desc);
                back.appendChild(action);
                
                return back;
            }

            // âœ… å‰µå»ºæ‡‰ç”¨é …ç›®
            function createAppItem(app, index) {
                const appItem = document.createElement('a');
                appItem.href = app.url;
                appItem.className = 'app-item';
                appItem.setAttribute('role', 'button');
                appItem.setAttribute('aria-label', `é–‹å•Ÿ ${app.name.replace(/\n/g, ' ')}`);
                appItem.setAttribute('tabindex', '0');
                appItem.dataset.url = app.url;
                appItem.dataset.name = app.name;
                appItem.dataset.desc = app.desc;
                appItem.dataset.icon = app.icon;
                appItem.style.animationDelay = `${index * 0.05}s`;
                
                // å‰µå»ºå¡ç‰‡
                const card = document.createElement('div');
                card.className = 'app-card';
                
                // æ­£é¢
                const front = createCardFront(app);
                card.appendChild(front);
                
                // èƒŒé¢ï¼ˆåƒ… PCï¼‰
                if (window.innerWidth > CONFIG.breakpoints.mobile) {
                    const back = createCardBack(app);
                    card.appendChild(back);
                }
                
                appItem.appendChild(card);
                
                // âœ… æ·»åŠ éµç›¤æ”¯æŒ
                appItem.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        window.open(app.url, '_blank', 'noopener,noreferrer');
                    }
                });
                
                // âœ… é˜»æ­¢é»˜èªé»æ“Šï¼Œä½¿ç”¨ window.open
                appItem.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.open(app.url, '_blank', 'noopener,noreferrer');
                });
                
                return appItem;
            }

            // âœ… å‰µå»ºéŒ¯èª¤ä½”ä½ç¬¦
            function createErrorPlaceholder(name) {
                const placeholder = document.createElement('div');
                placeholder.className = 'app-item error-placeholder';
                placeholder.style.opacity = '0.5';
                placeholder.innerHTML = `
                    <div style="display:flex;align-items:center;justify-content:center;height:100%;flex-direction:column;color:#00ffff;">
                        <div style="font-size:3rem;margin-bottom:10px;">âš ï¸</div>
                        <div>è¼‰å…¥å¤±æ•—: ${escapeHtml(name)}</div>
                    </div>
                `;
                return placeholder;
            }

            // âœ… æ¸²æŸ“æ‡‰ç”¨ç¨‹å¼ï¼ˆæ·»åŠ éŒ¯èª¤è™•ç†ï¼‰
            function renderApps() {
                const grid = document.getElementById('appsGrid');
                grid.innerHTML = '';
                
                const fragment = document.createDocumentFragment();

                apps.forEach((app, index) => {
                    try {
                        const appItem = createAppItem(app, index);
                        fragment.appendChild(appItem);
                    } catch (error) {
                        console.error(`æ¸²æŸ“æ‡‰ç”¨ ${app.name} å¤±æ•—:`, error);
                        fragment.appendChild(createErrorPlaceholder(app.name));
                    }
                });
                
                grid.appendChild(fragment);
                
                // åˆå§‹åŒ–äº¤äº’
                if (window.innerWidth > CONFIG.breakpoints.mobile) {
                    initMagneticEffect();
                }
                initTouchEvents();
            }

            // âœ… åˆå§‹åŒ–è§¸æ‘¸äº‹ä»¶ï¼ˆæ”¹é€²è¨ˆæ™‚å™¨ç®¡ç†ï¼‰
            const touchTimers = new WeakMap();
            
            function initTouchEvents() {
                const appItems = document.querySelectorAll('.app-item');
                const detailModal = document.getElementById('detailModal');
                const detailIcon = document.getElementById('detailIcon');
                const detailTitle = document.getElementById('detailTitle');
                const detailDesc = document.getElementById('detailDesc');
                const detailOpen = document.getElementById('detailOpen');
                const detailClose = document.getElementById('detailClose');

                let currentUrl = '';

                appItems.forEach(item => {
                    if (window.innerWidth <= CONFIG.breakpoints.mobile) {
                        item.addEventListener('touchstart', function(e) {
                            const timer = setTimeout(() => {
                                e.preventDefault();
                                currentUrl = this.dataset.url;
                                
                                // âœ… å®‰å…¨è¨­ç½®å…§å®¹
                                const iconImg = document.createElement('img');
                                iconImg.src = this.dataset.icon;
                                iconImg.alt = this.dataset.name;
                                detailIcon.innerHTML = '';
                                detailIcon.appendChild(iconImg);
                                
                                detailTitle.textContent = this.dataset.name;
                                detailDesc.textContent = this.dataset.desc;
                                
                                detailModal.classList.add('show');
                                
                                if (navigator.vibrate) {
                                    navigator.vibrate(50);
                                }
                            }, CONFIG.interactions.longPressDelay);
                            
                            touchTimers.set(this, timer);
                        }, { passive: false });

                        item.addEventListener('touchend', function() {
                            const timer = touchTimers.get(this);
                            if (timer) {
                                clearTimeout(timer);
                                touchTimers.delete(this);
                            }
                        });

                        item.addEventListener('touchmove', function() {
                            const timer = touchTimers.get(this);
                            if (timer) {
                                clearTimeout(timer);
                                touchTimers.delete(this);
                            }
                        });
                    }
                });

                detailOpen.addEventListener('click', () => {
                    window.open(currentUrl, '_blank', 'noopener,noreferrer');
                    detailModal.classList.remove('show');
                });

                detailClose.addEventListener('click', () => {
                    detailModal.classList.remove('show');
                });

                detailModal.addEventListener('click', (e) => {
                    if (e.target === detailModal) {
                        detailModal.classList.remove('show');
                    }
                });
            }

            // âœ… ç£å¸æ•ˆæœï¼ˆæ·»åŠ ç¯€æµï¼‰
            function initMagneticEffect() {
                const appItems = document.querySelectorAll('.app-item');

                appItems.forEach(item => {
                    item.addEventListener('mouseenter', function() {
                        this.classList.add('magnetic-active');
                    });

                    item.addEventListener('mouseleave', function() {
                        this.classList.remove('magnetic-active');
                        this.style.setProperty('--magnetic-x', '0px');
                        this.style.setProperty('--magnetic-y', '0px');
                    });

                    // âœ… ä½¿ç”¨ç¯€æµå„ªåŒ–æ€§èƒ½
                    const throttledMove = throttle(function(e) {
                        if (!this.classList.contains('magnetic-active')) return;

                        const rect = this.getBoundingClientRect();
                        const itemCenterX = rect.left + rect.width / 2;
                        const itemCenterY = rect.top + rect.height / 2;
                        
                        const deltaX = e.clientX - itemCenterX;
                        const deltaY = e.clientY - itemCenterY;
                        
                        const maxOffset = CONFIG.interactions.magneticMaxOffset;
                        const strength = CONFIG.interactions.magneticStrength;
                        
                        const magneticX = Math.max(-maxOffset, Math.min(maxOffset, deltaX * strength));
                        const magneticY = Math.max(-maxOffset, Math.min(maxOffset, deltaY * strength));
                        
                        this.style.setProperty('--magnetic-x', `${magneticX}px`);
                        this.style.setProperty('--magnetic-y', `${magneticY}px`);
                    }, 16); // ~60fps

                    item.addEventListener('mousemove', throttledMove);
                });
            }

            // âœ… ç²’å­ç³»çµ±ï¼ˆæ·»åŠ å¯è¦‹æ€§æª¢æ¸¬ï¼‰
            class ParticleSystem {
                constructor() {
                    this.canvas = document.getElementById('particleCanvas');
                    this.ctx = this.canvas.getContext('2d');
                    this.particles = [];
                    this.animationId = null;
                    
                    const config = window.innerWidth < CONFIG.breakpoints.mobile 
                        ? CONFIG.particles.mobile 
                        : CONFIG.particles.desktop;
                    
                    this.particleCount = config.count;
                    this.maxDistance = config.maxDistance;
                    
                    this.resize();
                    this.init();
                    this.animate();
                    
                    // âœ… ä½¿ç”¨é˜²æŠ–å„ªåŒ– resize
                    window.addEventListener('resize', debounce(() => this.resize(), 250));
                    
                    // âœ… é é¢å¯è¦‹æ€§æª¢æ¸¬
                    document.addEventListener('visibilitychange', () => {
                        if (document.hidden) {
                            if (this.animationId) {
                                cancelAnimationFrame(this.animationId);
                                this.animationId = null;
                            }
                        } else {
                            if (!this.animationId) {
                                this.animate();
                            }
                        }
                    });
                }

                resize() {
                    this.canvas.width = window.innerWidth;
                    this.canvas.height = window.innerHeight;
                }

                init() {
                    this.particles = [];
                    for (let i = 0; i < this.particleCount; i++) {
                        this.particles.push({
                            x: Math.random() * this.canvas.width,
                            y: Math.random() * this.canvas.height,
                            vx: (Math.random() - 0.5) * 0.8,
                            vy: (Math.random() - 0.5) * 0.8,
                            radius: Math.random() * 2 + 1
                        });
                    }
                }

                update() {
                    this.particles.forEach(particle => {
                        particle.x += particle.vx;
                        particle.y += particle.vy;

                        if (particle.x < 0 || particle.x > this.canvas.width) particle.vx *= -1;
                        if (particle.y < 0 || particle.y > this.canvas.height) particle.vy *= -1;
                    });
                }

                draw() {
                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                    this.particles.forEach(particle => {
                        this.ctx.beginPath();
                        this.ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                        this.ctx.fillStyle = 'rgba(0, 255, 255, 0.8)';
                        this.ctx.shadowBlur = 10;
                        this.ctx.shadowColor = 'rgba(0, 255, 255, 0.8)';
                        this.ctx.fill();
                        this.ctx.shadowBlur = 0;
                    });

                    for (let i = 0; i < this.particles.length; i++) {
                        for (let j = i + 1; j < this.particles.length; j++) {
                            const dx = this.particles[i].x - this.particles[j].x;
                            const dy = this.particles[i].y - this.particles[j].y;
                            const distance = Math.sqrt(dx * dx + dy * dy);

                            if (distance < this.maxDistance) {
                                const opacity = 1 - (distance / this.maxDistance);
                                this.ctx.beginPath();
                                this.ctx.strokeStyle = `rgba(0, 255, 255, ${opacity * 0.5})`;
                                this.ctx.lineWidth = 1;
                                this.ctx.moveTo(this.particles[i].x, this.particles[i].y);
                                this.ctx.lineTo(this.particles[j].x, this.particles[j].y);
                                this.ctx.stroke();
                            }
                        }
                    }
                }

                animate() {
                    // âœ… æª¢æŸ¥é é¢å¯è¦‹æ€§
                    if (document.hidden) {
                        this.animationId = null;
                        return;
                    }
                    
                    this.update();
                    this.draw();
                    this.animationId = requestAnimationFrame(() => this.animate());
                }
            }

            // âœ… PWA ç›¸é—œå‡½æ•¸
            function isIOS() {
                return /iPhone|iPad|iPod/i.test(navigator.userAgent);
            }

            function isStandalone() {
                return window.matchMedia('(display-mode: standalone)').matches || 
                       window.navigator.standalone === true;
            }

            let deferredPrompt = null;
            const installPrompt = document.getElementById('installPrompt');
            const installButton = document.getElementById('installButton');
            const installText = document.getElementById('installText');

            function hideInstallPrompt() {
                installPrompt.classList.remove('show');
                safeLocalStorage('installPromptClosed', 'true');
            }

            function showInstallPrompt() {
                installPrompt.classList.add('show');
            }

            function showIOSInstallGuide() {
                installText.innerHTML = 'ğŸ“± é»æ“Š <strong>åˆ†äº« ğŸ“¤</strong> â†’ <strong>åŠ å…¥ä¸»ç•«é¢</strong>';
                installButton.textContent = 'çŸ¥é“äº†';
                
                // âœ… ç§»é™¤èˆŠç›£è½å™¨
                const newButton = installButton.cloneNode(true);
                installButton.parentNode.replaceChild(newButton, installButton);
                
                document.getElementById('installButton').addEventListener('click', (e) => {
                    e.preventDefault();
                    hideInstallPrompt();
                });
                
                showInstallPrompt();
            }

            // âœ… PWA å®‰è£äº‹ä»¶
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                
                const promptClosed = safeLocalStorage('installPromptClosed');
                if (!isIOS() && !isStandalone() && promptClosed !== 'true') {
                    showInstallPrompt();
                }
            });

            installButton.addEventListener('click', async (e) => {
                e.preventDefault();
                
                if (!deferredPrompt) return;

                try {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log(`ç”¨æˆ¶é¸æ“‡: ${outcome}`);
                } catch (error) {
                    console.error('å®‰è£æç¤ºå¤±æ•—:', error);
                } finally {
                    deferredPrompt = null;
                    hideInstallPrompt();
                }
            });

            window.addEventListener('appinstalled', () => {
                console.log('âœ… PWA å·²å®‰è£');
                hideInstallPrompt();
            });

            // âœ… Service Worker è¨»å†Šï¼ˆä½¿ç”¨ Blob æ–¹å¼ï¼Œä½†æ·»åŠ éŒ¯èª¤è™•ç†ï¼‰
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    try {
                        const swCode = `
                            const CACHE_NAME = 'ai-gate-v1';
                            const urlsToCache = [
                                '/',
                                '/R0.png'
                            ];

                            self.addEventListener('install', (event) => {
                                event.waitUntil(
                                    caches.open(CACHE_NAME)
                                        .then(cache => cache.addAll(urlsToCache))
                                        .catch(err => console.error('Cache failed:', err))
                                );
                                self.skipWaiting();
                            });

                            self.addEventListener('activate', (event) => {
                                event.waitUntil(self.clients.claim());
                            });

                            self.addEventListener('fetch', (event) => {
                                event.respondWith(
                                    caches.match(event.request)
                                        .then(response => response || fetch(event.request))
                                        .catch(err => {
                                            console.error('Fetch failed:', err);
                                            return new Response('Network error', { status: 408 });
                                        })
                                );
                            });
                        `;

                        const blob = new Blob([swCode], { type: 'application/javascript' });
                        const swUrl = URL.createObjectURL(blob);

                        navigator.serviceWorker.register(swUrl)
                            .then(reg => {
                                console.log('âœ… Service Worker è¨»å†ŠæˆåŠŸ', reg.scope);
                                // âœ… æª¢æŸ¥æ›´æ–°
                                reg.update();
                            })
                            .catch(err => console.error('âŒ Service Worker è¨»å†Šå¤±æ•—:', err));
                    } catch (error) {
                        console.error('Service Worker åˆå§‹åŒ–å¤±æ•—:', error);
                    }
                });
            }

            // âœ… åˆå§‹åŒ–ï¼ˆæ·»åŠ éŒ¯èª¤é‚Šç•Œï¼‰
            document.addEventListener('DOMContentLoaded', () => {
                try {
                    renderApps();
                    new ParticleSystem();
                    
                    if (isStandalone()) return;

                    const promptClosed = safeLocalStorage('installPromptClosed');
                    if (promptClosed === 'true') return;

                    if (isIOS()) {
                        setTimeout(() => showIOSInstallGuide(), 2000);
                    }
                                } catch (error) {
                    console.error('åˆå§‹åŒ–å¤±æ•—:', error);
                    // âœ… é¡¯ç¤ºéŒ¯èª¤æç¤º
                    const grid = document.getElementById('appsGrid');
                    if (grid) {
                        grid.innerHTML = `
                            <div style="grid-column: 1 / -1; text-align: center; color: #00ffff; padding: 40px;">
                                <div style="font-size: 3rem; margin-bottom: 20px;">âš ï¸</div>
                                <div style="font-size: 1.5rem; margin-bottom: 10px;">è¼‰å…¥å¤±æ•—</div>
                                <div style="opacity: 0.7;">è«‹é‡æ–°æ•´ç†é é¢æˆ–è¯ç¹«æŠ€è¡“æ”¯æ´</div>
                                <button onclick="location.reload()" style="margin-top: 20px; padding: 10px 30px; background: #00ffff; color: #0a0e27; border: none; cursor: pointer; font-weight: bold;">
                                    é‡æ–°æ•´ç†
                                </button>
                            </div>
                        `;
                    }
                }
            });

            // âœ… é˜²æ­¢åœ–ç‰‡æ‹–æ›³
            document.addEventListener('dragstart', (e) => {
                if (e.target.tagName === 'IMG') {
                    e.preventDefault();
                }
            });

            // âœ… è¦–çª—å¤§å°æ”¹è®Šæ™‚é‡ç½®ç£å¸æ•ˆæœï¼ˆä½¿ç”¨é˜²æŠ–ï¼‰
            window.addEventListener('resize', debounce(() => {
                const appItems = document.querySelectorAll('.app-item');
                appItems.forEach(item => {
                    item.classList.remove('magnetic-active');
                    item.style.setProperty('--magnetic-x', '0px');
                    item.style.setProperty('--magnetic-y', '0px');
                    
                    // âœ… æ¸…ç†è§¸æ‘¸è¨ˆæ™‚å™¨
                    const timer = touchTimers.get(item);
                    if (timer) {
                        clearTimeout(timer);
                        touchTimers.delete(item);
                    }
                });
                
                // âœ… éŸ¿æ‡‰å¼é‡æ–°æ¸²æŸ“å¡ç‰‡èƒŒé¢
                if (window.innerWidth > CONFIG.breakpoints.mobile) {
                    const cards = document.querySelectorAll('.app-card');
                    cards.forEach((card, index) => {
                        const hasBack = card.querySelector('.card-back');
                        if (!hasBack && apps[index]) {
                            const back = createCardBack(apps[index]);
                            card.appendChild(back);
                        }
                    });
                } else {
                    // ç§»é™¤èƒŒé¢å¡ç‰‡ä»¥ç¯€çœæ€§èƒ½
                    const backs = document.querySelectorAll('.card-back');
                    backs.forEach(back => back.remove());
                }
            }, 250));

            // âœ… iOS æ©¡çš®ç­‹æ•ˆæœç¦ç”¨ï¼ˆé˜²æ­¢éåº¦æ»¾å‹•ï¼‰
            if (isIOS()) {
                let startY = 0;
                
                document.body.addEventListener('touchstart', function(e) {
                    startY = e.touches[0].pageY;
                }, { passive: false });
                
                document.body.addEventListener('touchmove', function(e) {
                    const currentY = e.touches[0].pageY;
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    const scrollHeight = document.documentElement.scrollHeight;
                    const clientHeight = document.documentElement.clientHeight;
                    
                    // åœ¨é ‚éƒ¨å‘ä¸‹æ‹‰æˆ–åœ¨åº•éƒ¨å‘ä¸Šæ‹‰æ™‚é˜»æ­¢
                    if ((scrollTop <= 0 && currentY > startY) || 
                        (scrollTop + clientHeight >= scrollHeight && currentY < startY)) {
                        e.preventDefault();
                    }
                }, { passive: false });
            }

            // âœ… éµç›¤å°èˆªæ”¯æŒ
            document.addEventListener('keydown', (e) => {
                // ESC é—œé–‰å½ˆçª—
                if (e.key === 'Escape') {
                    const detailModal = document.getElementById('detailModal');
                    if (detailModal.classList.contains('show')) {
                        detailModal.classList.remove('show');
                    }
                    
                    const installPrompt = document.getElementById('installPrompt');
                    if (installPrompt.classList.contains('show')) {
                        hideInstallPrompt();
                    }
                }
            });

            // âœ… æ€§èƒ½ç›£æ§ï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰
            if (window.performance && window.performance.timing) {
                window.addEventListener('load', () => {
                    setTimeout(() => {
                        const timing = window.performance.timing;
                        const loadTime = timing.loadEventEnd - timing.navigationStart;
                        const domReady = timing.domContentLoadedEventEnd - timing.navigationStart;
                        
                        console.log('ğŸ“Š æ€§èƒ½æŒ‡æ¨™:');
                        console.log(`   é é¢è¼‰å…¥æ™‚é–“: ${loadTime}ms`);
                        console.log(`   DOM å°±ç·’æ™‚é–“: ${domReady}ms`);
                        
                        // âœ… Web Vitals æª¢æ¸¬
                        if ('PerformanceObserver' in window) {
                            try {
                                // LCP (Largest Contentful Paint)
                                const lcpObserver = new PerformanceObserver((list) => {
                                    const entries = list.getEntries();
                                    const lastEntry = entries[entries.length - 1];
                                    console.log(`   LCP: ${lastEntry.renderTime || lastEntry.loadTime}ms`);
                                });
                                lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });
                                
                                // FID (First Input Delay)
                                const fidObserver = new PerformanceObserver((list) => {
                                    const entries = list.getEntries();
                                    entries.forEach(entry => {
                                        console.log(`   FID: ${entry.processingStart - entry.startTime}ms`);
                                    });
                                });
                                fidObserver.observe({ entryTypes: ['first-input'] });
                                
                                // CLS (Cumulative Layout Shift)
                                let clsScore = 0;
                                const clsObserver = new PerformanceObserver((list) => {
                                    for (const entry of list.getEntries()) {
                                        if (!entry.hadRecentInput) {
                                            clsScore += entry.value;
                                        }
                                    }
                                    console.log(`   CLS: ${clsScore.toFixed(4)}`);
                                });
                                clsObserver.observe({ entryTypes: ['layout-shift'] });
                            } catch (e) {
                                console.warn('Web Vitals ç›£æ§å¤±æ•—:', e);
                            }
                        }
                    }, 0);
                });
            }

            // âœ… éŒ¯èª¤å…¨å±€æ•ç²
            window.addEventListener('error', (e) => {
                console.error('å…¨å±€éŒ¯èª¤:', e.error);
                // å¯ä»¥åœ¨é€™è£¡æ·»åŠ éŒ¯èª¤ä¸Šå ±é‚è¼¯
            });

            window.addEventListener('unhandledrejection', (e) => {
                console.error('æœªè™•ç†çš„ Promise æ‹’çµ•:', e.reason);
                // å¯ä»¥åœ¨é€™è£¡æ·»åŠ éŒ¯èª¤ä¸Šå ±é‚è¼¯
            });

            // âœ… æš´éœ²å¿…è¦çš„ API ä¾›å¤–éƒ¨ä½¿ç”¨ï¼ˆå¦‚æœéœ€è¦ï¼‰
            window.AppPortal = {
                version: '2.0.0',
                renderApps: renderApps,
                config: CONFIG
            };

        })(); // IIFE çµæŸ
    </script>
</body>
</html>

